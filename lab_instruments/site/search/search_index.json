{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"index.html","title":"SCPI Instrument Toolkit","text":"<p>Python REPL for controlling lab instruments \u2014 oscilloscopes, power supplies, multimeters, and function generators \u2014 over VISA (USB, GPIB, Serial).</p>"},{"location":"index.html#quick-start","title":"Quick Start","text":""},{"location":"index.html#1-install","title":"1. Install","text":"<pre><code>pip install git+https://github.com/T-O-M-Tool-Oauto-Mationator/scpi-instrument-toolkit.git\n</code></pre> <p>Requires NI-VISA for USB and GPIB instruments.</p>"},{"location":"index.html#2-launch","title":"2. Launch","text":"<pre><code>scpi-repl           # auto-discovers connected instruments\nscpi-repl --mock    # simulate instruments (no hardware needed)\n</code></pre> <p>Managed machines (school / work computers)</p> <p>If <code>scpi-repl</code> is not recognized, pip installed the script to a directory that isn't on your PATH. Use the module form instead \u2014 <code>python</code> is always available: <pre><code>python -m lab_instruments\npython -m lab_instruments --mock\n</code></pre></p>"},{"location":"index.html#3-find-your-instruments","title":"3. Find your instruments","text":"<pre><code>list          # show all connected instruments and their names\nscan          # re-scan if you plugged something in after launch\n</code></pre> <p>Instruments are assigned names automatically based on type: <code>psu1</code>, <code>psu2</code>, <code>dmm1</code>, <code>scope1</code>, <code>awg1</code>, etc.</p>"},{"location":"index.html#4-control-an-instrument","title":"4. Control an instrument","text":"<pre><code>use psu1          # set psu1 as the active power supply\npsu chan 1 on     # enable output\npsu set 5.0 0.5   # set 5 V, 0.5 A current limit\npsu meas v        # measure output voltage\n</code></pre>"},{"location":"index.html#5-log-results-and-export","title":"5. Log results and export","text":"<p><code>meas_store</code> saves a reading to the log with a label (name you choose). <code>calc</code> retrieves it by that label. <code>log print</code> shows the table. <code>log save</code> exports it.</p> <pre><code>psu meas_store v output unit=V     # save voltage \u2014 label is \"output\"\ndmm config vdc                     # set DMM to DC voltage mode\ndmm meas_store dmm_v unit=V        # save DMM reading \u2014 label is \"dmm_v\"\ncalc error m[\"dmm_v\"] - m[\"output\"] unit=V   # reference labels in math\nlog print                           # show the full results table\nlog save results.csv                # export to CSV\n</code></pre> <p>See Log &amp; Calc for the full explanation of labels, <code>calc</code>, and export.</p>"},{"location":"index.html#addressing-multiple-instruments","title":"Addressing multiple instruments","text":"<p>When you have more than one instrument of the same type, they are numbered:</p> <pre><code>list\n# \u2192 psu1: HP E3631A\n# \u2192 psu2: Matrix MPS-6010H\n# \u2192 scope1: Rigol DHO804\n</code></pre> <p>You can address them directly by prefixing any command:</p> <pre><code>psu1 set 5.0      # set psu1 without changing the active selection\npsu2 set 12.0     # set psu2 at the same time\n</code></pre> <p>Or switch the active instrument with <code>use</code>:</p> <pre><code>use psu2\npsu set 12.0      # now acts on psu2\n</code></pre>"},{"location":"index.html#getting-help","title":"Getting help","text":"<pre><code>help              # list all commands\nhelp psu          # inline help for a specific command\ndocs              # open this documentation in your browser\nexamples          # list bundled example scripts\n</code></pre>"},{"location":"index.html#whats-in-the-docs","title":"What's in the docs","text":"Page What it covers General Commands scan, list, use, idn, raw, state, sleep, reload PSU Power supply control and measurement AWG Function generator \u2014 waveforms, frequency, amplitude DMM Multimeter \u2014 measurement modes, logging Scope Oscilloscope \u2014 channels, triggers, measurements, waveform capture Scripting Scripts, variables, loops, directives \u2014 full reference Examples Bundled example workflows with explanations Log &amp; Calc Measurement log, CSV export, derived calculations Instruments Supported models and connection setup"},{"location":"awg.html","title":"AWG \u2014 Function Generator","text":"<p>Controls arbitrary waveform generators and function generators.</p> <ul> <li>Channels are numbered <code>1</code>, <code>2</code>, or use <code>all</code> to affect both simultaneously</li> <li>Multiple AWGs are named <code>awg1</code>, <code>awg2</code>, etc.</li> </ul> Keysight EDU33212AJDS6600 (Seesii DDS)BK Precision 4063 <p>Dual-channel function/arbitrary waveform generator. Full SCPI support for all waveform types.</p> <p>DDS function generator with serial interface. Supports standard waveforms and arbitrary waveform loading.</p> <p>Single-channel function generator with USB interface.</p>"},{"location":"awg.html#awg-chan","title":"awg chan","text":"<p>Enable or disable an output channel.</p> <pre><code>awg chan &lt;1|2|all&gt; &lt;on|off&gt;\n</code></pre> Parameter Required Values Description <code>1\\|2\\|all</code> required <code>1</code>, <code>2</code>, <code>all</code> Channel to control. <code>all</code> affects both channels. <code>on\\|off</code> required <code>on</code>, <code>off</code> Enable or disable the output. <pre><code>awg chan 1 on       # enable channel 1\nawg chan 2 off      # disable channel 2\nawg chan all off    # disable both channels\n</code></pre>"},{"location":"awg.html#awg-wave","title":"awg wave","text":"<p>Configure waveform type and parameters in one command.</p> <pre><code>awg wave &lt;1|2|all&gt; &lt;type&gt; [freq=&lt;Hz&gt;] [amp=&lt;Vpp&gt;] [offset=&lt;V&gt;] [duty=&lt;%&gt;] [phase=&lt;deg&gt;]\n</code></pre> Parameter Required Values Description <code>1\\|2\\|all</code> required <code>1</code>, <code>2</code>, <code>all</code> Channel to configure. <code>type</code> required see below Waveform shape. <code>freq=</code> optional float (Hz) Output frequency in hertz. <code>amp=</code> optional float (Vpp) Peak-to-peak amplitude in volts. <code>offset=</code> optional float (V) DC offset voltage in volts. <code>duty=</code> optional 0.0\u2013100.0 Duty cycle percent \u2014 applies to square and pulse waveforms. <code>phase=</code> optional 0.0\u2013360.0 Phase offset in degrees. <p>Waveform types:</p> Type Description <code>sine</code> Sinusoidal wave <code>square</code> Square wave (use <code>duty=</code> to control duty cycle) <code>ramp</code> Ramp / sawtooth wave <code>triangle</code> Symmetric triangle wave <code>pulse</code> Pulse wave <code>noise</code> White noise <code>dc</code> DC level (set with <code>offset=</code>) <code>arb</code> Arbitrary waveform (device-dependent) <p>All keyword arguments are optional \u2014 omitted parameters keep their current values.</p> <pre><code>awg wave 1 sine freq=1000 amp=2.0 offset=0     # 1 kHz sine, 2 Vpp\nawg wave 1 square freq=500 duty=25              # 500 Hz square, 25% duty\nawg wave all sine freq=10000                    # set both channels to 10 kHz sine\nawg wave 2 ramp freq=100 amp=5.0               # 100 Hz ramp on channel 2\n</code></pre>"},{"location":"awg.html#awg-freq","title":"awg freq","text":"<p>Set output frequency without changing other parameters.</p> <pre><code>awg freq &lt;1|2|all&gt; &lt;Hz&gt;\n</code></pre> Parameter Required Values Description <code>1\\|2\\|all</code> required <code>1</code>, <code>2</code>, <code>all</code> Channel to configure. <code>Hz</code> required float &gt; 0 Frequency in hertz. <pre><code>awg freq 1 1000      # set channel 1 to 1 kHz\nawg freq all 50000   # set both channels to 50 kHz\n</code></pre>"},{"location":"awg.html#awg-amp","title":"awg amp","text":"<p>Set peak-to-peak amplitude without changing other parameters.</p> <pre><code>awg amp &lt;1|2|all&gt; &lt;Vpp&gt;\n</code></pre> Parameter Required Values Description <code>1\\|2\\|all</code> required <code>1</code>, <code>2</code>, <code>all</code> Channel to configure. <code>Vpp</code> required float (V) Peak-to-peak amplitude in volts. <pre><code>awg amp 1 3.3    # set channel 1 to 3.3 Vpp\nawg amp 2 1.0    # set channel 2 to 1 Vpp\n</code></pre>"},{"location":"awg.html#awg-offset","title":"awg offset","text":"<p>Set DC offset without changing other parameters.</p> <pre><code>awg offset &lt;1|2|all&gt; &lt;V&gt;\n</code></pre> Parameter Required Values Description <code>1\\|2\\|all</code> required <code>1</code>, <code>2</code>, <code>all</code> Channel to configure. <code>V</code> required float (V) DC offset in volts. Negative values shift the signal below ground. <pre><code>awg offset 1 1.65    # shift channel 1 waveform up by 1.65 V\nawg offset 2 -0.5    # shift channel 2 down by 0.5 V\n</code></pre>"},{"location":"awg.html#awg-duty","title":"awg duty","text":"<p>Set square wave duty cycle without changing other parameters.</p> <pre><code>awg duty &lt;1|2|all&gt; &lt;%&gt;\n</code></pre> Parameter Required Values Description <code>1\\|2\\|all</code> required <code>1</code>, <code>2</code>, <code>all</code> Channel to configure. <code>%</code> required 0.0\u2013100.0 Duty cycle as a percentage. <pre><code>awg duty 1 25    # set channel 1 to 25% duty cycle\nawg duty 1 50    # 50% duty cycle (symmetric square wave)\n</code></pre>"},{"location":"awg.html#awg-phase","title":"awg phase","text":"<p>Set phase offset without changing other parameters.</p> <pre><code>awg phase &lt;1|2|all&gt; &lt;degrees&gt;\n</code></pre> Parameter Required Values Description <code>1\\|2\\|all</code> required <code>1</code>, <code>2</code>, <code>all</code> Channel to configure. <code>degrees</code> required 0.0\u2013360.0 Phase offset in degrees. <pre><code>awg phase 2 180    # invert channel 2 (180\u00b0 phase offset)\nawg phase 2 90     # 90\u00b0 phase offset between channels\n</code></pre>"},{"location":"awg.html#awg-sync","title":"awg sync","text":"<p>Enable or disable the sync/trigger output signal.</p> <pre><code>awg sync &lt;on|off&gt;\n</code></pre> Parameter Required Values Description <code>on\\|off</code> required <code>on</code>, <code>off</code> Enable or disable the sync output. <pre><code>awg sync on     # enable sync output\nawg sync off    # disable sync output\n</code></pre> <p>Note</p> <p>Sync output is only available on AWGs that support it.</p>"},{"location":"awg.html#awg-state","title":"awg state","text":"<pre><code>awg state &lt;on|off|safe|reset&gt;\n</code></pre> Value Effect <code>on</code> Enable all outputs <code>off</code> Disable all outputs <code>safe</code> Outputs off, returns to known defaults <code>reset</code> <code>*RST</code> \u2014 factory defaults"},{"location":"dmm.html","title":"DMM \u2014 Multimeter","text":"<p>Controls digital multimeters.</p> <ul> <li>Multiple DMMs are named <code>dmm1</code>, <code>dmm2</code>, etc.</li> <li>Typical workflow: configure mode \u2192 take readings \u2192 store results</li> <li>Or use <code>dmm meas</code> for a one-shot measurement without a separate configure step</li> </ul> HP 34401AOWON XDM1041 <p>6\u00bd-digit multimeter with GPIB interface. Supports NPLC control, display text, fetch, and high-accuracy measurements.</p> <p>4\u00bd-digit multimeter with USB/serial interface. Supports basic DMM commands.</p>"},{"location":"dmm.html#dmm-config","title":"dmm config","text":"<p>Configure the measurement mode. The mode stays active until changed.</p> <pre><code>dmm config &lt;mode&gt; [range] [resolution] [nplc=&lt;n&gt;]\n</code></pre> Parameter Required Values Description <code>mode</code> required see below What to measure. <code>range</code> optional float, <code>DEF</code>, <code>MIN</code>, <code>MAX</code> Measurement range (e.g. <code>10</code> for 10 V range). <code>DEF</code> = auto-range. <code>resolution</code> optional float, <code>DEF</code>, <code>MIN</code>, <code>MAX</code> Resolution (number of significant digits). <code>DEF</code> = default. <code>nplc=</code> optional <code>0.02</code>, <code>0.2</code>, <code>1</code>, <code>10</code>, <code>100</code> Integration time in power line cycles. Higher = slower but lower noise. HP 34401A only, DC modes only. <p>Measurement modes:</p> Mode Measures <code>vdc</code> DC voltage <code>vac</code> AC voltage (RMS) <code>idc</code> DC current <code>iac</code> AC current (RMS) <code>res</code> Resistance, 2-wire <code>fres</code> Resistance, 4-wire (Kelvin) <code>freq</code> Frequency <code>per</code> Period <code>cont</code> Continuity <code>diode</code> Diode forward voltage <code>cap</code> Capacitance <code>temp</code> Temperature <pre><code>dmm config vdc                    # DC voltage, auto-range\ndmm config vdc 10                 # DC voltage, 10 V range\ndmm config vdc 10 DEF nplc=10    # high-accuracy DC voltage (slow)\ndmm config res                    # 2-wire resistance, auto-range\ndmm config fres DEF DEF nplc=1   # 4-wire resistance, 1 PLC\ndmm config freq                   # frequency measurement\n</code></pre> <p>Tip</p> <p>For a single quick reading, use <code>dmm meas</code> instead \u2014 it configures and reads in one step.</p>"},{"location":"dmm.html#dmm-read","title":"dmm read","text":"<p>Take a reading using the currently configured mode.</p> <pre><code>dmm read\n</code></pre> <p>Call <code>dmm config</code> first to set the mode. <code>dmm read</code> does not store the result \u2014 use <code>dmm meas_store</code> to record it.</p> <pre><code>dmm config vdc\ndmm read       # take one DC voltage reading\n</code></pre>"},{"location":"dmm.html#dmm-meas_store","title":"dmm meas_store","text":"<p>Read and record the result to the measurement log.</p> <pre><code>dmm meas_store &lt;label&gt; [scale=&lt;factor&gt;] [unit=&lt;str&gt;]\n</code></pre> Parameter Required Values Description <code>label</code> required string, no spaces Name for this entry in the log. Appears as the row identifier in <code>log print</code> output. Also used as the dictionary key in <code>calc</code> expressions: <code>m[\"label\"]</code>. Use underscores instead of spaces \u2014 e.g. <code>vout_mv</code>. <code>scale=</code> optional float Multiply the raw reading by this factor before storing. Useful for unit conversion \u2014 e.g. <code>scale=1000</code> to convert V \u2192 mV, or <code>scale=0.001</code> to convert mA \u2192 A. Default: <code>1.0</code> (no scaling). <code>unit=</code> optional string Unit label shown in <code>log print</code> output (e.g. <code>V</code>, <code>mV</code>, <code>A</code>, <code>\u03a9</code>). Display-only \u2014 does not affect the stored value or calculations. <p>Requires dmm config first</p> <p>Call <code>dmm config &lt;mode&gt;</code> before using <code>meas_store</code>. The DMM must be in the correct mode.</p> <pre><code>dmm config vdc\ndmm meas_store vout unit=V                  # store as 'vout', access as m[\"vout\"]\n\ndmm config res\ndmm meas_store r_load unit=\u03a9               # store resistance\n\ndmm config vdc\ndmm meas_store vout_mv scale=1000 unit=mV  # convert V \u2192 mV before storing\n</code></pre> <p>Using stored values in calculations:</p> <pre><code>dmm config vdc\ndmm meas_store voltage unit=V\n\ndmm config idc\ndmm meas_store current unit=A\n\ncalc power m[\"voltage\"] * m[\"current\"] unit=W    # compute power\nlog print\n</code></pre> <p>See Log &amp; Calc for full details.</p>"},{"location":"dmm.html#dmm-meas","title":"dmm meas","text":"<p>One-shot measurement \u2014 configure and read in a single command.</p> <pre><code>dmm meas &lt;mode&gt; [range] [resolution]\n</code></pre> Parameter Required Values Description <code>mode</code> required same as <code>dmm config</code> Measurement mode. <code>range</code> optional float or <code>DEF</code> Measurement range. Default: auto-range. <code>resolution</code> optional float or <code>DEF</code> Resolution. Default: default. <pre><code>dmm meas vdc        # quick DC voltage reading\ndmm meas res        # quick resistance reading\ndmm meas freq       # quick frequency reading\n</code></pre> <p>Note</p> <p><code>dmm meas</code> does not support <code>nplc=</code> or storing results. For high-accuracy or repeated measurements, use <code>dmm config</code> + <code>dmm read</code> / <code>dmm meas_store</code>.</p>"},{"location":"dmm.html#dmm-fetch","title":"dmm fetch","text":"<p>Fetch the last reading without triggering a new measurement.</p> <pre><code>dmm fetch\n</code></pre> <p>Returns the most recent measurement result without re-triggering. HP 34401A only.</p>"},{"location":"dmm.html#dmm-beep","title":"dmm beep","text":"<p>Trigger an audible beep from the DMM.</p> <pre><code>dmm beep\n</code></pre> <p>Useful as audio confirmation during scripted tests \u2014 e.g. beep when a measurement is complete.</p>"},{"location":"dmm.html#dmm-display","title":"dmm display","text":"<p>Control the front panel display.</p> <pre><code>dmm display &lt;on|off&gt;\n</code></pre> Parameter Required Values Description <code>on\\|off</code> required <code>on</code>, <code>off</code> Turn the display on or off. <pre><code>dmm display off    # blank the display (speeds up measurements on HP 34401A)\ndmm display on     # restore display\n</code></pre>"},{"location":"dmm.html#dmm-text","title":"dmm text","text":"<p>Show custom text on the DMM display.</p> <pre><code>dmm text &lt;message&gt; [scroll=&lt;auto|on|off&gt;] [delay=&lt;s&gt;] [loops=&lt;n&gt;] [pad=&lt;n&gt;] [width=&lt;n&gt;]\n</code></pre> Parameter Required Values Description <code>message</code> required string Text to show on the front panel. <code>scroll=</code> optional <code>auto</code>, <code>on</code>, <code>off</code> Scroll behavior for messages wider than the display. <code>auto</code> = scroll only if too wide. <code>delay=</code> optional float (s) Delay between scroll steps in seconds. <code>loops=</code> optional int Number of times to repeat the scroll animation. <pre><code>dmm text READY\ndmm text TESTING scroll=auto delay=0.2\n</code></pre> <p>Note</p> <p>HP 34401A only.</p>"},{"location":"dmm.html#dmm-ranges","title":"dmm ranges","text":"<p>Print the valid measurement ranges for the connected DMM model.</p> <pre><code>dmm ranges\n</code></pre>"},{"location":"dmm.html#dmm-state","title":"dmm state","text":"<pre><code>dmm state &lt;safe|reset&gt;\n</code></pre> Value Effect <code>safe</code> Returns to safe defaults <code>reset</code> <code>*RST</code> \u2014 factory defaults"},{"location":"examples.html","title":"Example Workflows","text":"<p>These bundled examples demonstrate common lab measurement workflows. Load any example into your session and run it, or use it as a starting point for your own scripts.</p> <pre><code>examples                        # list all bundled examples\nexamples load &lt;name&gt;            # load a specific example\nexamples load all               # load all examples at once\nscript run &lt;name&gt; [params]      # run a loaded example\n</code></pre>"},{"location":"examples.html#psu_dmm_test","title":"psu_dmm_test","text":"<p>Set PSU to a voltage, measure with DMM, log result.</p> <p>This is the simplest useful workflow: power a DUT at a target voltage and record what the DMM actually measures.</p> <p>Parameters:</p> Parameter Default Description <code>voltage</code> <code>5.0</code> Target PSU voltage in volts. <code>label</code> <code>vtest</code> Label for the DMM measurement in the log. <p>Load and run:</p> <pre><code>examples load psu_dmm_test\nscript run psu_dmm_test voltage=5.0 label=vtest\nscript run psu_dmm_test voltage=3.3 label=v3v3\n</code></pre> <p>What it does:</p> <ol> <li>Turns on PSU channel 1</li> <li>Sets the voltage to <code>${voltage}</code> V</li> <li>Waits 500 ms for the output to settle</li> <li>Records the PSU's measured output as <code>psu_v</code></li> <li>Takes a DC voltage reading from the DMM, records as <code>${label}</code></li> <li>Prints the log</li> </ol> <p>Script source:</p> <pre><code># psu_dmm_test\nset voltage 5.0\nset label vtest\n\nprint === PSU/DMM Voltage Test ===\nprint Target: ${voltage}V\n\npsu1 chan 1 on\npsu1 set ${voltage}\nsleep 0.5\n\npsu1 meas_store v psu_v unit=V\n\ndmm1 config vdc\ndmm1 meas_store ${label} unit=V\n\nprint === Test complete ===\nlog print\n</code></pre> <p>Interpreting results:</p> <p>After running, <code>log print</code> shows:</p> <pre><code>Label      Value      Unit   Source\npsu_v      4.9987     V      psu.meas\nvtest      4.9992     V      dmm.read\n</code></pre> <p>Compute the error between PSU setpoint and DMM reading:</p> <pre><code>calc error m[\"vtest\"] - 5.0 unit=V\ncalc error_pct (m[\"vtest\"] - 5.0) / 5.0 * 100 unit=%\n</code></pre>"},{"location":"examples.html#voltage_sweep","title":"voltage_sweep","text":"<p>Sweep PSU through a list of voltages, log DMM reading at each step.</p> <p>Tests how a DUT responds across a range of supply voltages.</p> <p>Load and run:</p> <pre><code>examples load voltage_sweep\nscript run voltage_sweep\n</code></pre> <p>What it does:</p> <ol> <li>Turns on PSU channel 1</li> <li>For each voltage in the list: sets PSU \u2192 waits 500 ms \u2192 records DMM reading</li> <li>Turns off PSU</li> <li>Prints and saves the log to <code>voltage_sweep.csv</code></li> </ol> <p>Default voltage list: <code>1.0 2.0 3.3 5.0 9.0 12.0</code></p> <p>To change the voltage list: load the example, then <code>script edit voltage_sweep</code> and modify the <code>for</code> line.</p> <p>Script source:</p> <pre><code># voltage_sweep\nprint === Voltage Sweep ===\npsu1 chan 1 on\nsleep 0.3\ndmm1 config vdc\n\nfor v 1.0 2.0 3.3 5.0 9.0 12.0\n  print Setting ${v}V...\n  psu1 set ${v}\n  sleep 0.5\n  dmm1 meas_store v_${v} unit=V\nend\n\npsu1 chan 1 off\nprint === Sweep complete ===\nlog print\nlog save voltage_sweep.csv\n</code></pre> <p>Analyzing results:</p> <p>After running, each voltage step is recorded as <code>v_1.0</code>, <code>v_2.0</code>, <code>v_3.3</code>, etc. You can compute differences:</p> <pre><code>calc delta_3v3_5v m[\"v_5.0\"] - m[\"v_3.3\"] unit=V\n</code></pre>"},{"location":"examples.html#awg_scope_check","title":"awg_scope_check","text":"<p>Output a sine wave on AWG ch1, measure frequency and PK2PK on the scope.</p> <p>A basic signal integrity check \u2014 verify the AWG is outputting what you expect.</p> <p>Parameters:</p> Parameter Default Description <code>freq</code> <code>1000</code> Target frequency in Hz. <code>amp</code> <code>2.0</code> Target amplitude in Vpp. <p>Load and run:</p> <pre><code>examples load awg_scope_check\nscript run awg_scope_check freq=1000 amp=2.0\nscript run awg_scope_check freq=10000 amp=1.0\n</code></pre> <p>What it does:</p> <ol> <li>Enables AWG channel 1</li> <li>Configures a sine wave at <code>${freq}</code> Hz, <code>${amp}</code> Vpp</li> <li>Waits 500 ms for signal to stabilize</li> <li>Runs <code>scope autoset</code> to auto-configure the scope</li> <li>Waits 1 s for autoset to settle</li> <li>Records: FREQUENCY, PK2PK, and RMS from scope channel 1</li> </ol> <p>Script source:</p> <pre><code># awg_scope_check\nset freq 1000\nset amp 2.0\n\nprint === AWG + Scope Signal Check ===\nprint Frequency: ${freq} Hz   Amplitude: ${amp} Vpp\n\nawg1 chan 1 on\nawg1 wave 1 sine freq=${freq} amp=${amp} offset=0\nsleep 0.5\n\nscope1 autoset\nsleep 1.0\n\nscope1 meas_store 1 FREQUENCY meas_freq unit=Hz\nscope1 meas_store 1 PK2PK     meas_pk2pk unit=V\nscope1 meas_store 1 RMS       meas_rms unit=V\n\nprint === Results ===\nlog print\n</code></pre> <p>Check accuracy:</p> <pre><code>calc freq_error (m[\"meas_freq\"] - 1000) / 1000 * 100 unit=%\ncalc amp_error (m[\"meas_pk2pk\"] - 2.0) / 2.0 * 100 unit=%\n</code></pre>"},{"location":"examples.html#freq_sweep","title":"freq_sweep","text":"<p>Sweep AWG through a list of frequencies, scope measures each.</p> <p>Characterize frequency response \u2014 useful for testing filters, amplifiers, and signal paths.</p> <p>Load and run:</p> <pre><code>examples load freq_sweep\nscript run freq_sweep\n</code></pre> <p>What it does:</p> <ol> <li>Enables AWG ch1, sets sine wave with fixed amplitude</li> <li>For each frequency in the list: sets frequency \u2192 waits 400 ms \u2192 records FREQUENCY and PK2PK from scope</li> <li>Disables AWG</li> <li>Prints and saves log to <code>freq_sweep.csv</code></li> </ol> <p>Default frequency list: <code>100 500 1000 5000 10000 50000 100000</code> (Hz)</p> <p>Script source:</p> <pre><code># freq_sweep\nprint === Frequency Sweep ===\nawg1 chan 1 on\nawg1 wave 1 sine amp=2.0 offset=0\nsleep 0.3\n\nfor f 100 500 1000 5000 10000 50000 100000\n  print Testing ${f} Hz...\n  awg1 freq 1 ${f}\n  sleep 0.4\n  scope1 meas_store 1 FREQUENCY freq_${f} unit=Hz\n  scope1 meas_store 1 PK2PK     pk2pk_${f} unit=V\nend\n\nawg1 chan 1 off\nprint === Sweep complete ===\nlog print\nlog save freq_sweep.csv\n</code></pre> <p>Computing gain:</p> <p>If you're testing a filter or amplifier, measure the input and output simultaneously:</p> <pre><code># Modify the loop to capture both channels:\nfor f 100 500 1000 5000 10000 50000\n  awg1 freq 1 ${f}\n  sleep 0.4\n  scope1 meas_store 1 PK2PK in_${f} unit=V\n  scope1 meas_store 2 PK2PK out_${f} unit=V\n  calc gain_${f} m[\"out_${f}\"] / m[\"in_${f}\"]\nend\n</code></pre>"},{"location":"examples.html#psu_ramp","title":"psu_ramp","text":"<p>Ramp PSU voltage from start to end in N equal steps.</p> <p>Useful for gradually bringing up power to a DUT and logging the response at each step.</p> <p>Parameters:</p> Parameter Default Description <code>v_start</code> <code>0</code> Starting voltage. <code>v_end</code> <code>12.0</code> Ending voltage. <code>steps</code> <code>7</code> Number of steps (informational \u2014 edit the <code>for</code> line to change the actual list). <code>delay</code> <code>0.5</code> Seconds to wait at each step. <p>Load and run:</p> <pre><code>examples load psu_ramp\nscript run psu_ramp v_start=0 v_end=12.0 delay=1.0\n</code></pre> <p>Script source:</p> <pre><code># psu_ramp\nset v_start 0\nset v_end 12.0\nset steps 7\nset delay 0.5\n\nprint === PSU Voltage Ramp ===\nprint ${v_start}V \u2192 ${v_end}V in ${steps} steps\n\npsu1 chan 1 on\n\nfor v ${v_start} 2.0 4.0 6.0 8.0 10.0 ${v_end}\n  print Ramping to ${v}V\n  psu1 set ${v}\n  sleep ${delay}\n  psu1 meas_store v ramp_${v} unit=V\nend\n\nprint === Ramp complete ===\nlog print\n</code></pre> <p>Customizing the step list</p> <p>The <code>for</code> loop hardcodes the voltage steps (<code>2.0 4.0 6.0 ...</code>). To change the actual step values, load the example with <code>examples load psu_ramp</code>, then <code>script edit psu_ramp</code> and modify the <code>for</code> line directly.</p>"},{"location":"examples.html#building-your-own","title":"Building your own","text":"<p>Use these examples as templates. The general pattern for any measurement script is:</p> <pre><code># 1. Set defaults (overridable at run time)\nset voltage 5.0\nset label my_test\nset delay 0.5\n\n# 2. Operator setup\nprint === My Test ===\npause Connect hardware, then press Enter\n\n# 3. Configure instruments\npsu1 chan 1 on\npsu1 set ${voltage}\nsleep ${delay}\n\n# 4. Measure and store\npsu1 meas_store v psu_out unit=V\ndmm1 config vdc\ndmm1 meas_store dmm_out unit=V\n\n# 5. Derived calculations\ncalc error m[\"dmm_out\"] - m[\"psu_out\"] unit=V\n\n# 6. Export\nlog print\nlog save ${label}_results.csv\n\n# 7. Safe state\npsu1 chan 1 off\n</code></pre> <p>See Scripting for the complete directive reference.</p>"},{"location":"general.html","title":"General Commands","text":"<p>These commands work regardless of which instrument is active.</p>"},{"location":"general.html#scan","title":"scan","text":"<p>Re-scan for connected VISA instruments and connect any new ones found.</p> <pre><code>scan\n</code></pre> <p>Instruments are identified by querying <code>*IDN?</code> and matched against the supported instrument list. They are assigned names like <code>psu1</code>, <code>dmm1</code>, <code>scope1</code>, <code>awg1</code>. If multiple of the same type are found they are numbered: <code>psu1</code>, <code>psu2</code>, etc.</p> <p>Tip</p> <p>You don't need to run <code>scan</code> manually on startup \u2014 the REPL scans automatically when it launches.</p>"},{"location":"general.html#list","title":"list","text":"<p>Show all currently connected instruments.</p> <pre><code>list\n</code></pre> <p>Displays each instrument's assigned name, model, and whether it is currently active (set via <code>use</code>).</p>"},{"location":"general.html#use","title":"use","text":"<p>Set the active instrument for subsequent generic commands.</p> <pre><code>use &lt;name&gt;\n</code></pre> Parameter Required Description <code>name</code> required Instrument name as shown by <code>list</code> (e.g. <code>psu1</code>, <code>scope2</code>) <p>When only one instrument of a type is connected it is selected automatically. With multiple of the same type you must <code>use</code> the desired one before using generic commands like <code>psu set</code>.</p> <pre><code>use psu1          # make psu1 active\npsu set 5.0       # acts on psu1\n\nuse psu2          # switch to psu2\npsu set 12.0      # now acts on psu2\n</code></pre> <p>Direct addressing</p> <p>You can skip <code>use</code> entirely by prefixing the instrument name to any command: <pre><code>psu1 set 5.0\npsu2 set 12.0\n</code></pre> This does not change the active selection.</p>"},{"location":"general.html#idn","title":"idn","text":"<p>Query a instrument's identification string (<code>*IDN?</code>).</p> <pre><code>idn [name]\n</code></pre> Parameter Required Description <code>name</code> optional Instrument to query. Defaults to the active instrument if omitted. <p>The response is the instrument's manufacturer, model, serial number, and firmware version.</p> <pre><code>idn           # query active instrument\nidn scope1    # query scope1 specifically\n</code></pre>"},{"location":"general.html#raw","title":"raw","text":"<p>Send a raw SCPI command or query directly.</p> <pre><code>raw &lt;command&gt;\n</code></pre> Parameter Required Description <code>command</code> required Any SCPI string. If it ends with <code>?</code> the response is printed. <pre><code>raw *RST              # reset the instrument\nraw OUTP:STAT ON      # send a command\nraw MEAS:VOLT:DC?     # query \u2014 prints the response\n</code></pre> <p>Note</p> <p><code>raw</code> sends to the active instrument. Use <code>use &lt;name&gt;</code> first if needed, or prefix the command: <code>psu1 raw *RST</code>.</p>"},{"location":"general.html#state","title":"state","text":"<p>Set the active instrument to a named state.</p> <pre><code>state &lt;on|off|safe|reset&gt;\n</code></pre> Value Effect <code>on</code> Enable output <code>off</code> Disable output <code>safe</code> Outputs off, returns to safe defaults <code>reset</code> Sends <code>*RST</code> \u2014 restores factory defaults <pre><code>state safe     # safe state on active instrument\nstate reset    # factory reset active instrument\n</code></pre>"},{"location":"general.html#all","title":"all","text":"<p>Apply a state to every connected instrument simultaneously.</p> <pre><code>all &lt;on|off|safe|reset&gt;\n</code></pre> <p>Same values as <code>state</code>. Useful as a quick emergency stop or to reset everything before a new test.</p> <pre><code>all safe      # put everything in safe state\nall off       # turn off all outputs\n</code></pre>"},{"location":"general.html#sleep-wait","title":"sleep / wait","text":"<p>Pause for a specified duration.</p> <pre><code>sleep &lt;seconds&gt;\nwait &lt;seconds&gt;\n</code></pre> Parameter Required Description <code>seconds</code> required Duration to pause. Supports fractions: <code>0.5</code> = 500 ms. <p><code>wait</code> is an alias for <code>sleep</code>.</p> <pre><code>sleep 1.0     # wait 1 second\nsleep 0.5     # wait 500 ms\nwait 2        # wait 2 seconds\n</code></pre> <p>Also valid as a script directive: <code>sleep ${delay}</code></p>"},{"location":"general.html#clear","title":"clear","text":"<p>Clear the terminal screen.</p> <pre><code>clear\n</code></pre>"},{"location":"general.html#reload","title":"reload","text":"<p>Restart the REPL process, disconnecting all instruments.</p> <pre><code>reload\n</code></pre>"},{"location":"general.html#version","title":"version","text":"<p>Print the installed version of the toolkit.</p> <pre><code>version\n</code></pre>"},{"location":"general.html#exit-quit","title":"exit / quit","text":"<p>Close the REPL and disconnect all instruments safely.</p> <pre><code>exit\nquit\n</code></pre>"},{"location":"instruments.html","title":"Supported Instruments","text":""},{"location":"instruments.html#supported-models","title":"Supported models","text":"Model Type Interface Key Features Rigol DHO804 Oscilloscope USB Screenshot, display, acquire, cursor, math, record, mask, label, invert, bwlimit, built-in AWG/counter/DVM Tektronix MSO2024 Oscilloscope USB / GPIB Basic scope commands HP E3631A Power Supply GPIB Triple-output, tracking Matrix MPS-6010H-1C Power Supply Serial Remote mode HP 34401A Multimeter GPIB Display text, NPLC control OWON XDM1041 Multimeter USB / Serial Basic DMM commands BK Precision 4063 Function Generator USB Basic AWG commands Keysight EDU33212A Function Generator USB Dual-channel JDS6600 (Seesii DDS) Function Generator Serial DDS waveform codes"},{"location":"instruments.html#connection-setup","title":"Connection setup","text":""},{"location":"instruments.html#usb-and-gpib-instruments","title":"USB and GPIB instruments","text":"<ol> <li>Install NI-VISA</li> <li>Connect the instrument</li> <li>Launch <code>scpi-repl</code> \u2014 it will auto-detect the instrument</li> </ol>"},{"location":"instruments.html#serial-instruments-matrix-mps-jds6600","title":"Serial instruments (Matrix MPS, JDS6600)","text":"<p>Serial instruments are probed automatically at multiple baud rates. No manual configuration is needed. Connect via USB-to-serial adapter, then launch <code>scpi-repl</code>.</p>"},{"location":"instruments.html#auto-detection","title":"Auto-detection","text":"<p>On startup (or when you type <code>scan</code>), the REPL:</p> <ol> <li>Lists all VISA resources (USB, GPIB, Serial)</li> <li>Queries <code>*IDN?</code> on each one</li> <li>Matches the response against the known model list</li> <li>Assigns a name (<code>psu1</code>, <code>dmm1</code>, <code>scope1</code>, <code>awg1</code>, etc.)</li> </ol> <p>If multiple instruments of the same type are found, they are numbered: <code>psu1</code>, <code>psu2</code>, etc.</p>"},{"location":"instruments.html#testing-without-hardware","title":"Testing without hardware","text":"<p>Use <code>--mock</code> to run the REPL with simulated instruments:</p> <pre><code>scpi-repl --mock\n</code></pre> <p>Mock mode injects: <code>psu1</code>, <code>psu2</code>, <code>awg1</code>, <code>awg2</code>, <code>dmm1</code>, <code>dmm2</code>, <code>scope1</code>, <code>scope2</code> \u2014 two of each type. Measurements return realistic random values. Useful for testing scripts before connecting real hardware.</p>"},{"location":"logging.html","title":"Log &amp; Calc","text":""},{"location":"logging.html#the-measurement-log-what-it-is-and-why-you-need-it","title":"The measurement log \u2014 what it is and why you need it","text":"<p>Every time you run a <code>meas_store</code> command, the REPL saves the result to a persistent measurement log \u2014 a table that accumulates all your readings for the current session.</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  psu meas_store v    output_v  unit=V                   \u2502\n\u2502       \u2502               \u2502                                 \u2502\n\u2502       \u2502               \u2514\u2500 label: the name you choose     \u2502\n\u2502       \u2502                   for this row in the table     \u2502\n\u2502       \u2514\u2500 what to measure (voltage)                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>After running a few <code>meas_store</code> commands, the log looks like:</p> <pre><code>Label       Value       Unit   Source\noutput_v    4.9987      V      psu.meas\ndmm_v       4.9992      V      dmm.read\nfreq_ch1    999.87      Hz     scope.meas.FREQUENCY\n</code></pre> <p><code>log print</code> shows it. <code>log save results.csv</code> exports it. <code>calc</code> does math on the values.</p>"},{"location":"logging.html#what-is-a-label","title":"What is a label?","text":"<p>A label is the name you give a stored measurement \u2014 the row key in the table above.</p> <p>Rules:</p> <ul> <li>No spaces \u2014 use underscores: <code>output_v</code>, <code>ch1_pk2pk</code>, <code>r_load</code></li> <li>Must be unique per session \u2014 storing twice with the same label overwrites the earlier value</li> <li>You reference it in <code>calc</code> as <code>m[\"label\"]</code></li> </ul> <p>Why labels matter: without a name, you can't retrieve the value later. <code>psu meas v</code> just prints to the screen and is gone. <code>psu meas_store v output_v</code> saves it so you can compute <code>calc error m[\"output_v\"] - 5.0</code> afterwards.</p> <pre><code># meas = print only (nothing saved):\npsu meas v          # prints 4.9987, then forgotten\n\n# meas_store = save with a name:\npsu meas_store v output_v unit=V    # saves 4.9987 as \"output_v\"\ncalc error m[\"output_v\"] - 5.0      # retrieves it: 4.9987 - 5.0 = -0.0013\nlog print                            # shows the full table\n</code></pre>"},{"location":"logging.html#log-print","title":"log print","text":"<p>Display all recorded measurements in the terminal.</p> <pre><code>log print\n</code></pre> <p>Prints a formatted table with columns: Label | Value | Unit | Source.</p> <p>Run this at the end of a test sequence to review all results.</p>"},{"location":"logging.html#log-save","title":"log save","text":"<p>Export the measurement log to a file.</p> <pre><code>log save &lt;filename&gt; [csv|txt]\n</code></pre> Parameter Required Values Description <code>filename</code> required file path Output file path. <code>csv\\|txt</code> optional <code>csv</code>, <code>txt</code> Format. Defaults to <code>csv</code> if the filename ends in <code>.csv</code>, otherwise <code>txt</code>. <pre><code>log save results.csv          # CSV format (opens in Excel)\nlog save results.txt          # formatted text table\nlog save sweep_data.csv       # save to named file\n</code></pre> <p>CSV files can be opened directly in Excel, LibreOffice Calc, or imported into Python with pandas.</p>"},{"location":"logging.html#log-clear","title":"log clear","text":"<p>Remove all measurements from the log.</p> <pre><code>log clear\n</code></pre> <p>Use this before starting a new test sequence to ensure only the new results are saved.</p> <pre><code>log clear\nscript run my_test\nlog print\nlog save my_test_results.csv\n</code></pre>"},{"location":"logging.html#calc","title":"calc","text":"<p>Compute a derived value from stored measurements and add it to the log.</p> <pre><code>calc &lt;label&gt; &lt;expression&gt; [unit=&lt;str&gt;]\n</code></pre> Parameter Required Values Description <code>label</code> required string, no spaces Name for the computed result. Appears in <code>log print</code> and can be referenced in later <code>calc</code> expressions. <code>expression</code> required Python arithmetic Math expression. Access stored measurements by label using <code>m[\"label\"]</code>. Use <code>last</code> for the most recently stored value. <code>unit=</code> optional string Unit label shown in <code>log print</code>. Display-only."},{"location":"logging.html#accessing-stored-measurements","title":"Accessing stored measurements","text":"<p>Use <code>m[\"label\"]</code> to reference any value previously stored in the log:</p> <pre><code>psu1 meas_store v psu_v unit=V\npsu1 meas_store i psu_i unit=A\ncalc power m[\"psu_v\"] * m[\"psu_i\"] unit=W\n</code></pre> <p>Use <code>last</code> to reference the most recently stored value:</p> <pre><code>dmm1 config vdc\ndmm1 meas_store my_reading unit=V\ncalc doubled last * 2 unit=V\n</code></pre>"},{"location":"logging.html#available-functions-and-constants","title":"Available functions and constants","text":"Name Description <code>m[\"label\"]</code> Access a stored measurement by label <code>last</code> The most recently stored value <code>abs(x)</code> Absolute value <code>min(a, b)</code> Minimum of two values <code>max(a, b)</code> Maximum of two values <code>round(x, n)</code> Round to n decimal places <code>pi</code> \u03c0 (3.14159...) <code>sqrt(x)</code> Square root <code>log(x)</code> Natural logarithm <code>log10(x)</code> Base-10 logarithm"},{"location":"logging.html#chained-calculations","title":"Chained calculations","text":"<p>The result of <code>calc</code> is stored in the log, so you can chain calculations:</p> <pre><code>psu1 meas_store v v_in unit=V\npsu1 meas_store i i_in unit=A\ndmm1 config vdc\ndmm1 meas_store v_out unit=V\n\ncalc power_in  m[\"v_in\"] * m[\"i_in\"] unit=W\ncalc power_out m[\"v_out\"] * m[\"i_in\"] unit=W      # assume same current\ncalc efficiency m[\"power_out\"] / m[\"power_in\"] * 100 unit=%\n</code></pre>"},{"location":"logging.html#examples","title":"Examples","text":"<p>Compute percentage error:</p> <pre><code>dmm1 config vdc\ndmm1 meas_store measured unit=V\ncalc error_pct (m[\"measured\"] - 5.0) / 5.0 * 100 unit=%\n</code></pre> <p>Voltage ratio (gain):</p> <pre><code>scope1 meas_store 1 PK2PK v_in unit=V\nscope1 meas_store 2 PK2PK v_out unit=V\ncalc gain m[\"v_out\"] / m[\"v_in\"]\ncalc gain_db 20 * log10(m[\"gain\"]) unit=dB\n</code></pre> <p>Resistance from V and I:</p> <pre><code>psu1 meas_store v v_supply unit=V\ndmm1 meas_store idc i_load unit=A\ncalc resistance m[\"v_supply\"] / m[\"i_load\"] unit=\u03a9\n</code></pre> <p>Crest factor:</p> <pre><code>scope1 meas_store 1 PK2PK pk2pk unit=V\nscope1 meas_store 1 RMS rms unit=V\ncalc crest_factor m[\"pk2pk\"] / (2 * m[\"rms\"])\n</code></pre>"},{"location":"logging.html#data-controlling-where-files-are-saved","title":"data \u2014 controlling where files are saved","text":"<p>By default, screenshots, waveform CSVs, and <code>log save</code> files all land in <code>~/Documents/scpi-instrument-toolkit/data/</code>. Use <code>data</code> to point them anywhere you want for the current session.</p> <pre><code>data &lt;path&gt;    # set output directory (absolute or relative to cwd)\ndata           # print the current output directory\ndata reset     # go back to the default\n</code></pre> Example Effect <code>data .</code> Save files in the current working directory <code>data ./lab3</code> Save files in a <code>lab3/</code> subfolder of cwd <code>data /mnt/usb/captures</code> Save to an absolute path <code>data reset</code> Restore default (<code>~/Documents/scpi-instrument-toolkit/data/</code>) <p>The setting applies to every save command in the session \u2014 <code>scope screenshot</code>, <code>scope save</code>, and <code>log save</code> all respect it. Subdirectories within the output dir are still created automatically (e.g. <code>scope screenshot lab3/cap.png</code> \u2192 <code>&lt;data_dir&gt;/lab3/cap.png</code>).</p> <p>You can also use it inside a <code>.scpi</code> script so the output location is part of the test setup:</p> <pre><code># lab3.scpi\ndata .         # save everything relative to where I launched the REPL\n\nlog clear\nfor VIN ${SWEEP}\n  ...\n  scope screenshot cap_${VIN}V.png\n  scope save 1,2,3,4 wave_${VIN}V.csv\nend\nlog save results.csv\n</code></pre> <p>Note</p> <p><code>data</code> only affects the current REPL session. For a permanent default, set the <code>SCPI_DATA_DIR</code> environment variable before launching the REPL \u2014 it takes effect whenever <code>data</code> has not been set.</p>"},{"location":"logging.html#typical-workflow","title":"Typical workflow","text":"<pre><code># 1. Clear previous results\nlog clear\n\n# 2. Run measurements\npsu1 chan 1 on\npsu1 set 5.0\nsleep 0.5\n\npsu1 meas_store v psu_v unit=V     # save as \"psu_v\"\npsu1 meas_store i psu_i unit=A     # save as \"psu_i\"\ndmm1 config vdc\ndmm1 meas_store dmm_v unit=V       # save as \"dmm_v\"\n\n# 3. Derive values\ncalc power       m[\"psu_v\"] * m[\"psu_i\"] unit=W\ncalc v_error     m[\"dmm_v\"] - m[\"psu_v\"] unit=V\ncalc v_error_pct m[\"v_error\"] / m[\"psu_v\"] * 100 unit=%\n\n# 4. Review and export\nlog print\nlog save results.csv\n</code></pre>"},{"location":"psu.html","title":"PSU \u2014 Power Supply","text":"<p>Controls power supply units over VISA.</p> <ul> <li>Single-channel PSUs (e.g. HP E3631A): channel is always <code>1</code></li> <li>Multi-channel PSUs (e.g. Matrix MPS-6010H): channels <code>1</code>, <code>2</code>, <code>3</code>, or <code>all</code></li> <li>Multiple PSUs are named <code>psu1</code>, <code>psu2</code>, etc.</li> </ul> <p>Address a specific PSU directly: <code>psu1 set 5.0</code> \u2014 or use <code>use psu1</code> then <code>psu set 5.0</code>.</p> HP E3631AMatrix MPS-6010H <p>Triple-output power supply. Channels: 1 (0\u20136 V), 2 (0\u201325 V), 3 (0\u2013 \u221225 V). Supports tracking mode for \u00b1supply configurations.</p> <p>Single-channel programmable PSU with serial interface. Supports remote mode control.</p>"},{"location":"psu.html#psu-chan","title":"psu chan","text":"<p>Enable or disable an output channel.</p> <pre><code>psu chan &lt;channel&gt; &lt;on|off&gt;\n</code></pre> Parameter Required Values Description <code>channel</code> required <code>1</code>, <code>2</code>, <code>3</code>, <code>all</code> Channel number. Single-channel PSUs always use <code>1</code>. Use <code>all</code> to toggle all channels at once. <code>on\\|off</code> required <code>on</code>, <code>off</code> <code>on</code> = enable output voltage; <code>off</code> = disable output. <pre><code>psu chan 1 on        # enable output (single-channel PSU)\npsu chan 2 off       # disable channel 2 (multi-channel PSU)\npsu chan all off     # disable all channels at once\n</code></pre>"},{"location":"psu.html#psu-set","title":"psu set","text":"<p>Set output voltage and optional current limit.</p> Single-channel PSUMulti-channel PSU <pre><code>psu set &lt;voltage&gt; [current]\n</code></pre> <pre><code>psu set &lt;channel&gt; &lt;voltage&gt; [current]\n</code></pre> Parameter Required Values Description <code>channel</code> multi-ch only <code>1</code>, <code>2</code>, <code>3</code> Channel number \u2014 required before voltage on multi-channel PSUs. <code>voltage</code> required float (V) Target output voltage in volts. <code>current</code> optional float (A) Current limit in amperes. If omitted, the current limit is unchanged. <pre><code>psu set 5.0               # set 5 V (single-channel)\npsu set 5.0 0.5           # set 5 V with 0.5 A limit\npsu set 2 12.0            # multi-channel: channel 2 to 12 V\npsu set 2 12.0 1.0        # multi-channel: channel 2, 12 V, 1 A limit\n</code></pre>"},{"location":"psu.html#psu-meas","title":"psu meas","text":"<p>Measure and print the live output value.</p> <pre><code>psu meas &lt;v|i&gt; [channel]\n</code></pre> Parameter Required Values Description <code>v\\|i</code> required <code>v</code>, <code>i</code> <code>v</code> = measure output voltage; <code>i</code> = measure output current. <code>channel</code> multi-ch only <code>1</code>, <code>2</code>, <code>3</code> Channel to measure. Required for multi-channel PSUs. <pre><code>psu meas v         # print output voltage\npsu meas i         # print output current\npsu meas v 2       # multi-channel: channel 2 voltage\n</code></pre> <p>Note</p> <p><code>psu meas</code> prints the value but does not record it. To record for export or calculations, use <code>psu meas_store</code>.</p>"},{"location":"psu.html#psu-meas_store","title":"psu meas_store","text":"<p>Measure and record to the measurement log.</p> <pre><code>psu meas_store &lt;v|i&gt; [channel] &lt;label&gt; [unit=&lt;str&gt;]\n</code></pre> Parameter Required Values Description <code>v\\|i</code> required <code>v</code>, <code>i</code> Quantity to measure: <code>v</code> = voltage, <code>i</code> = current. <code>channel</code> multi-ch only <code>1</code>, <code>2</code>, <code>3</code> Channel to measure. Omit for single-channel PSUs. <code>label</code> required string, no spaces Name for this entry in the log. Appears as the row identifier in <code>log print</code> output. Also used as the dictionary key in <code>calc</code> expressions: <code>m[\"label\"]</code>. Use underscores instead of spaces \u2014 e.g. <code>ch1_voltage</code>. <code>unit=</code> optional string Unit label shown in <code>log print</code> output (e.g. <code>V</code>, <code>A</code>). Display-only \u2014 does not affect the stored numeric value or any calculation. <pre><code>psu meas_store v psu_out unit=V        # store as 'psu_out', access as m[\"psu_out\"]\npsu meas_store i psu_i unit=A          # store current\npsu meas_store v 2 ch2_v unit=V       # multi-channel: channel 2 voltage\n</code></pre> <p>After storing, view with <code>log print</code> or compute derived values with <code>calc</code>:</p> <pre><code>psu meas_store v psu_v unit=V\npsu meas_store i psu_i unit=A\ncalc power m[\"psu_v\"] * m[\"psu_i\"] unit=W    # compute power\nlog print\n</code></pre> <p>See Log &amp; Calc for full details.</p>"},{"location":"psu.html#psu-get","title":"psu get","text":"<p>Show the programmed voltage/current setpoints (not the live measured output).</p> <pre><code>psu get\n</code></pre> <p>For live measured values use <code>psu meas</code>.</p>"},{"location":"psu.html#psu-track","title":"psu track","text":"<p>Enable or disable channel tracking mode (multi-channel PSUs only).</p> <pre><code>psu track &lt;on|off&gt;\n</code></pre> Parameter Required Description <code>on\\|off</code> required <code>on</code> = link channels in tracking mode (\u00b1supply); <code>off</code> = independent control. <p>In tracking mode the two adjustable channels mirror each other \u2014 one outputs positive, the other negative \u2014 for split-supply configurations.</p> <pre><code>psu track on     # enable tracking (\u00b1supply mode)\npsu track off    # return to independent channel control\n</code></pre>"},{"location":"psu.html#psu-save-recall","title":"psu save / recall","text":"<p>Save or restore voltage/current settings to a numbered slot (multi-channel PSUs only).</p> <pre><code>psu save &lt;1-3&gt;\npsu recall &lt;1-3&gt;\n</code></pre> Parameter Required Values Description <code>1-3</code> required <code>1</code>, <code>2</code>, <code>3</code> Slot number to save to or recall from. <pre><code>psu save 1      # save current settings to slot 1\npsu recall 1    # restore settings from slot 1\n</code></pre>"},{"location":"psu.html#psu-state","title":"psu state","text":"<pre><code>psu state &lt;on|off|safe|reset&gt;\n</code></pre> Value Effect <code>on</code> Enable output <code>off</code> Disable output <code>safe</code> Outputs off, voltage setpoints zeroed <code>reset</code> <code>*RST</code> \u2014 factory defaults"},{"location":"scope.html","title":"Scope \u2014 Oscilloscope","text":"<p>Controls oscilloscopes over VISA.</p> <ul> <li>Channels are numbered <code>1</code>\u2013<code>4</code>. Use <code>all</code> to affect every channel at once.</li> <li>Multiple scopes are named <code>scope1</code>, <code>scope2</code>, etc.</li> </ul>"},{"location":"scope.html#acquisition-control","title":"Acquisition Control","text":""},{"location":"scope.html#scope-autoset","title":"scope autoset","text":"<p>Auto-configure the scope for the current input signal.</p> <pre><code>scope autoset\n</code></pre> <p>Automatically adjusts time/division, voltage/division, and trigger settings to display the input signal cleanly. Equivalent to pressing the Autoset button on the front panel.</p>"},{"location":"scope.html#scope-run-stop-single","title":"scope run / stop / single","text":"<pre><code>scope run       # start continuous acquisition\nscope stop      # freeze the display\nscope single    # arm single-shot trigger\n</code></pre> Command Effect <code>run</code> Start continuous acquisition (free-running) <code>stop</code> Freeze the display at the current waveform <code>single</code> Arm the trigger \u2014 capture one waveform then stop"},{"location":"scope.html#channel-control","title":"Channel Control","text":""},{"location":"scope.html#scope-chan","title":"scope chan","text":"<p>Enable or disable channel display.</p> <pre><code>scope chan &lt;1-4|all&gt; &lt;on|off&gt;\n</code></pre> Parameter Required Values Description <code>1-4\\|all</code> required <code>1</code>, <code>2</code>, <code>3</code>, <code>4</code>, <code>all</code> Channel number, or <code>all</code>. <code>on\\|off</code> required <code>on</code>, <code>off</code> Show or hide the channel. <pre><code>scope chan 1 on      # show channel 1\nscope chan 3 off     # hide channel 3\nscope chan all on    # show all channels\n</code></pre>"},{"location":"scope.html#scope-coupling","title":"scope coupling","text":"<p>Set input coupling for one or more channels.</p> <pre><code>scope coupling &lt;1-4|all&gt; &lt;DC|AC|GND&gt;\n</code></pre> Parameter Required Values Description <code>1-4\\|all</code> required <code>1</code>\u2013<code>4</code>, <code>all</code> Channel(s) to configure. <code>DC\\|AC\\|GND</code> required <code>DC</code>, <code>AC</code>, <code>GND</code> Coupling mode. DC = pass all frequencies. AC = block DC component. GND = disconnect input (shows 0 V reference). <pre><code>scope coupling 1 AC       # AC-couple channel 1\nscope coupling all DC     # DC-couple all channels\n</code></pre>"},{"location":"scope.html#scope-probe","title":"scope probe","text":"<p>Set probe attenuation so the scope displays correct voltages.</p> <pre><code>scope probe &lt;1-4|all&gt; &lt;attenuation&gt;\n</code></pre> Parameter Required Values Description <code>1-4\\|all</code> required <code>1</code>\u2013<code>4</code>, <code>all</code> Channel(s). <code>attenuation</code> required <code>1</code>, <code>10</code>, <code>100</code> Probe attenuation ratio. <code>1</code> = direct connection, <code>10</code> = 10\u00d7 probe, <code>100</code> = 100\u00d7 high-voltage probe. <pre><code>scope probe 1 10    # channel 1 has a 10\u00d7 probe\nscope probe all 1   # all channels: direct (1\u00d7) connection\n</code></pre>"},{"location":"scope.html#horizontal-time-axis","title":"Horizontal (Time) Axis","text":""},{"location":"scope.html#scope-hscale","title":"scope hscale","text":"<p>Set the time per division.</p> <pre><code>scope hscale &lt;s/div&gt;\n</code></pre> Parameter Required Values Description <code>s/div</code> required float (s) Seconds per division. E.g. <code>0.001</code> = 1 ms/div, <code>1e-6</code> = 1 \u00b5s/div. <pre><code>scope hscale 0.001      # 1 ms/div\nscope hscale 0.0001     # 100 \u00b5s/div\n</code></pre>"},{"location":"scope.html#scope-hpos-hmove","title":"scope hpos / hmove","text":"<p>Set or adjust the horizontal trigger position.</p> <pre><code>scope hpos &lt;percentage&gt;     # set absolute position\nscope hmove &lt;delta&gt;         # adjust relative to current position\n</code></pre> Parameter Required Description <code>percentage</code> required (hpos) Trigger position as percent of screen width. <code>delta</code> required (hmove) Relative adjustment amount. <pre><code>scope hpos 50     # center trigger at 50%\nscope hmove 10    # shift right by 10%\n</code></pre>"},{"location":"scope.html#vertical-voltage-axis","title":"Vertical (Voltage) Axis","text":""},{"location":"scope.html#scope-vscale","title":"scope vscale","text":"<p>Set voltage per division for one or more channels.</p> <pre><code>scope vscale &lt;1-4|all&gt; &lt;V/div&gt; [pos]\n</code></pre> Parameter Required Values Description <code>1-4\\|all</code> required <code>1</code>\u2013<code>4</code>, <code>all</code> Channel(s). <code>V/div</code> required float (V) Voltage per division. <code>pos</code> optional float (divisions) Vertical position offset. Default: <code>0</code> (centered). <pre><code>scope vscale 1 0.5           # channel 1: 0.5 V/div\nscope vscale 1 0.5 -2        # 0.5 V/div, shifted down 2 divisions\nscope vscale all 1.0 0       # all channels: 1 V/div, centered\n</code></pre>"},{"location":"scope.html#scope-vpos-vmove","title":"scope vpos / vmove","text":"<p>Set or adjust vertical position.</p> <pre><code>scope vpos &lt;1-4|all&gt; &lt;divisions&gt;    # set absolute position\nscope vmove &lt;1-4|all&gt; &lt;delta&gt;       # adjust relative to current\n</code></pre> <pre><code>scope vpos 1 0        # center channel 1\nscope vmove 1 -1      # move channel 1 down by 1 division\n</code></pre>"},{"location":"scope.html#trigger","title":"Trigger","text":""},{"location":"scope.html#scope-trigger","title":"scope trigger","text":"<p>Configure the trigger.</p> <pre><code>scope trigger &lt;channel&gt; &lt;level&gt; [slope=&lt;RISE|FALL&gt;] [mode=&lt;AUTO|NORM|SINGLE&gt;]\n</code></pre> Parameter Required Values Description <code>channel</code> required <code>1</code>\u2013<code>4</code> Trigger source channel. <code>level</code> required float (V) Trigger threshold voltage. <code>slope=</code> optional <code>RISE</code>, <code>FALL</code> Edge to trigger on. Default: <code>RISE</code>. <code>mode=</code> optional <code>AUTO</code>, <code>NORM</code>, <code>SINGLE</code> Trigger mode. <code>AUTO</code> = free-run if no trigger; <code>NORM</code> = wait for trigger; <code>SINGLE</code> = one-shot. Default: <code>AUTO</code>. <pre><code>scope trigger 1 0.0                           # ch1, 0 V threshold, rising edge\nscope trigger 1 1.5 slope=FALL                # ch1, 1.5 V, falling edge\nscope trigger 1 0.0 slope=RISE mode=NORM      # ch1, normal mode\n</code></pre>"},{"location":"scope.html#measurements","title":"Measurements","text":""},{"location":"scope.html#scope-meas","title":"scope meas","text":"<p>Take and print a single measurement.</p> <pre><code>scope meas &lt;1-4|all&gt; &lt;type&gt;\n</code></pre> Parameter Required Values Description <code>1-4\\|all</code> required <code>1</code>\u2013<code>4</code>, <code>all</code> Channel to measure. <code>type</code> required see below Measurement type (case-insensitive). Rigol DHO804Tektronix MSO2024 <p>All types are case-insensitive. Aliases are separated by <code>/</code>.</p> <p>Voltage</p> Type / Aliases Description <code>VPP</code> / <code>PK2PK</code> Peak-to-peak voltage <code>VRMS</code> / <code>RMS</code> RMS voltage <code>ACRMS</code> AC RMS voltage <code>VMAX</code> / <code>MAXIMUM</code> Maximum voltage <code>VMIN</code> / <code>MINIMUM</code> Minimum voltage <code>VTOP</code> / <code>TOP</code> Top voltage (high state) <code>VBASE</code> / <code>BASE</code> Base voltage (low state) <code>VAMP</code> / <code>AMPLITUDE</code> Amplitude (Vtop \u2212 Vbase) <code>VAVG</code> / <code>MEAN</code> / <code>AVERAGE</code> Mean voltage <code>VMID</code> / <code>MID</code> Mid voltage <code>VUPPER</code> / <code>UPPER</code> Upper threshold voltage <code>VLOWER</code> / <code>LOWER</code> Lower threshold voltage <code>VARIANCE</code> / <code>VAR</code> Voltage variance <code>PVRMS</code> Per-period RMS voltage <code>TVMAX</code> Time at Vmax <code>TVMIN</code> Time at Vmin <p>Time</p> Type / Aliases Description <code>FREQUENCY</code> / <code>FREQ</code> Signal frequency <code>PERIOD</code> Signal period <code>RISE</code> / <code>RISETIME</code> Rise time (10%\u201390%) <code>FALL</code> / <code>FALLTIME</code> Fall time (90%\u201310%) <code>PWIDTH</code> Positive pulse width <code>NWIDTH</code> Negative pulse width <p>Duty Cycle</p> Type / Aliases Description <code>PDUTY</code> / <code>POSDUTY</code> Positive duty cycle <code>NDUTY</code> / <code>NEGDUTY</code> Negative duty cycle <p>Shape</p> Type / Aliases Description <code>OVERSHOOT</code> / <code>OVER</code> Overshoot <code>PRESHOOT</code> / <code>PRE</code> Preshoot <code>PSLEWRATE</code> / <code>POSSLEW</code> Positive slew rate <code>NSLEWRATE</code> / <code>NEGSLEW</code> Negative slew rate <p>Area</p> Type / Aliases Description <code>MAREA</code> / <code>AREA</code> Waveform area <code>MPAREA</code> / <code>PERIODAREA</code> Period area <p>Counts</p> Type / Aliases Description <code>PPULSES</code> Positive pulse count <code>NPULSES</code> Negative pulse count <code>POSEDGES</code> / <code>PEDGES</code> Positive edge count <code>NEGEDGES</code> / <code>NEDGES</code> Negative edge count <pre><code>scope meas 1 FREQUENCY    # print channel 1 frequency\nscope meas 1 PK2PK        # print channel 1 peak-to-peak\nscope meas 2 RISE         # print channel 2 rise time\nscope meas 3 OVERSHOOT    # print channel 3 overshoot\n</code></pre> <p>Voltage</p> Type Description <code>PK2PK</code> Peak-to-peak voltage <code>RMS</code> RMS voltage <code>CRMS</code> Cycle RMS voltage <code>MEAN</code> Mean voltage <code>AMPLITUDE</code> Amplitude (high \u2212 low) <code>MINIMUM</code> Minimum voltage <code>MAXIMUM</code> Maximum voltage <code>HIGH</code> High voltage level <code>LOW</code> Low voltage level <p>Time</p> Type Description <code>FREQUENCY</code> Signal frequency <code>PERIOD</code> Signal period <code>RISE</code> Rise time <code>FALL</code> Fall time <code>PWIDTH</code> Positive pulse width <code>NWIDTH</code> Negative pulse width <p>Shape</p> Type Description <code>POSOVERSHOOT</code> Positive overshoot <code>NEGOVERSHOOT</code> Negative overshoot <pre><code>scope meas 1 FREQUENCY    # print channel 1 frequency\nscope meas 1 PK2PK        # print channel 1 peak-to-peak\nscope meas 2 RISE         # print channel 2 rise time\n</code></pre> <p>Note</p> <p><code>scope meas</code> prints the result but does not record it. Use <code>scope meas_store</code> to save to the log.</p>"},{"location":"scope.html#scope-meas_setup","title":"scope meas_setup","text":"<p>Configure a measurement slot before capturing so the scope computes the value when the trigger fires.</p> <pre><code>scope meas_setup &lt;1-4|all&gt; &lt;type&gt;\n</code></pre> Parameter Required Values Description <code>1-4\\|all</code> required <code>1</code>\u2013<code>4</code>, <code>all</code> Channel(s) to configure. <code>type</code> required see measurement types above Measurement to compute on next capture. Rigol DHO804Tektronix MSO2024 <pre><code>scope meas_setup 3 RISE     # configure CH3 rise time slot\nscope meas_setup 4 RISE     # configure CH4 rise time slot\nscope single\nscope wait_stop timeout=10\nscope meas_force            # force DSP computation\nscope meas_store 3 RISE ch3_rise unit=s\n</code></pre> <p>Note</p> <p>Call <code>scope meas_setup</code> before <code>scope single</code>. Use <code>scope meas_force</code> after <code>wait_stop</code> to ensure computation is complete before querying.</p> <p>Not supported. The MSO2024 computes measurements on demand \u2014 use <code>scope meas_store</code> directly after capture without a prior setup step.</p>"},{"location":"scope.html#scope-meas_force","title":"scope meas_force","text":"<p>Force the scope's measurement DSP to compute all configured slots.</p> Rigol DHO804Tektronix MSO2024 <pre><code>scope meas_force\n</code></pre> <p>The DHO804 computes measurements lazily \u2014 values are only finalized when the display refreshes. <code>scope meas_force</code> triggers an internal display refresh (no file written) so that <code>scope meas_store</code> returns valid values immediately after <code>scope wait_stop</code>.</p> <p>Note</p> <p>Use after <code>scope wait_stop</code> and before <code>scope meas_store</code> when you do not want to save a screenshot first. If you already call <code>scope screenshot</code> before <code>scope meas_store</code>, this step is redundant.</p> <p>Not supported. The MSO2024 computes measurements on demand \u2014 no force step is needed.</p>"},{"location":"scope.html#scope-meas_clear","title":"scope meas_clear","text":"<p>Remove all measurement items from the on-screen results panel.</p> Rigol DHO804Tektronix MSO2024 <pre><code>scope meas_clear\n</code></pre> <p>Sends <code>:MEASure:CLEar</code> to hide the measurement sidebar. Use before <code>scope screenshot</code> to capture a clean image without the measurement overlay.</p> <pre><code>scope meas_force\nscope meas_store 3 RISE ch3_rise unit=s\nscope meas_clear              # close the panel\nscope screenshot cap.png      # clean screenshot\n</code></pre> <p>Not supported. The MSO2024 does not maintain an on-screen measurement panel via SCPI.</p>"},{"location":"scope.html#scope-meas_store","title":"scope meas_store","text":"<p>Measure and record to the measurement log.</p> <pre><code>scope meas_store &lt;1-4|all&gt; &lt;type&gt; &lt;label&gt; [unit=&lt;str&gt;]\n</code></pre> Parameter Required Values Description <code>1-4\\|all</code> required <code>1</code>\u2013<code>4</code>, <code>all</code> Channel to measure. <code>type</code> required see measurement types above Measurement type. <code>label</code> required string, no spaces Name for this entry in the log. Appears in <code>log print</code> and used as the dictionary key in <code>calc</code> expressions: <code>m[\"label\"]</code>. Use underscores \u2014 e.g. <code>ch1_freq</code>. <code>unit=</code> optional string Unit shown in <code>log print</code> (e.g. <code>Hz</code>, <code>V</code>). Display-only \u2014 does not affect the stored value or calculations. Rigol DHO804Tektronix MSO2024 <pre><code>scope meas_store 1 FREQUENCY meas_freq unit=Hz\nscope meas_store 1 PK2PK     meas_pk2pk unit=V\nscope meas_store 3 RISE      ch3_rise unit=s\n</code></pre> <pre><code>scope meas_store 1 FREQUENCY meas_freq unit=Hz\nscope meas_store 1 PK2PK     meas_pk2pk unit=V\nscope meas_store 2 RISE      ch2_rise unit=s\n</code></pre> <p>Then use in calculations:</p> <pre><code>calc crest_factor m[\"meas_pk2pk\"] / m[\"meas_rms\"]   # compute crest factor\nlog print\n</code></pre>"},{"location":"scope.html#scope-meas_delay","title":"scope meas_delay","text":"<p>Measure the time delay between two channels.</p> <pre><code>scope meas_delay &lt;ch1&gt; &lt;ch2&gt; [edge1=RISE] [edge2=RISE]\n</code></pre> Parameter Required Values Description <code>ch1</code> / <code>ch2</code> required <code>1</code>\u2013<code>4</code> Source and reference channel numbers. <code>edge1=</code> / <code>edge2=</code> optional <code>RISE</code>, <code>FALL</code> Which edge to detect on each channel. Default: <code>RISE</code>. Rigol DHO804Tektronix MSO2024 <pre><code>scope meas_delay 1 2              # delay from ch1 rising to ch2 rising\nscope meas_delay 1 2 edge2=FALL  # delay from ch1 rising to ch2 falling\n</code></pre> <pre><code>scope meas_delay 1 2              # delay from ch1 rising to ch2 rising\nscope meas_delay 1 2 edge2=FALL  # delay from ch1 rising to ch2 falling\n</code></pre>"},{"location":"scope.html#scope-meas_delay_store","title":"scope meas_delay_store","text":"<p>Measure delay and record to the log.</p> <pre><code>scope meas_delay_store &lt;ch1&gt; &lt;ch2&gt; &lt;label&gt; [edge1=RISE] [edge2=RISE] [direction=FORWARDS] [unit=]\n</code></pre> Parameter Required Values Description <code>ch1</code> / <code>ch2</code> required <code>1</code>\u2013<code>4</code> Channel numbers. <code>label</code> required string Log entry name \u2014 same rules as <code>meas_store</code>. <code>edge1=</code> / <code>edge2=</code> optional <code>RISE</code>, <code>FALL</code> Edge selection. Default: <code>RISE</code>. <code>direction=</code> optional <code>FORWARDS</code>, <code>BACKWARDS</code> Search direction. Default: <code>FORWARDS</code>. <code>unit=</code> optional string Unit shown in log (e.g. <code>s</code>, <code>ms</code>). Display-only. Rigol DHO804Tektronix MSO2024 <pre><code>scope meas_delay_store 1 2 prop_delay unit=s\n</code></pre> <pre><code>scope meas_delay_store 1 2 prop_delay unit=s\n</code></pre>"},{"location":"scope.html#waveform-capture","title":"Waveform Capture","text":""},{"location":"scope.html#scope-save","title":"scope save","text":"<p>Download waveform data and save to a CSV file.</p> <pre><code>scope save &lt;channels&gt; &lt;file.csv&gt; [record=&lt;s&gt;] [time=&lt;s&gt;] [points=&lt;n&gt;]\n</code></pre> Parameter Required Values Description <code>channels</code> required <code>1</code>\u2013<code>4</code> or comma-separated Channel(s) to save. E.g. <code>1</code> or <code>1,2</code>. <code>file.csv</code> required file path Output file. Created or overwritten. <code>record=</code> / <code>time=</code> optional float (s) Record for this many seconds before saving. <code>points=</code> optional int Number of waveform points to request from scope. <pre><code>scope save 1 output.csv              # save channel 1 waveform\nscope save 1,2 both.csv             # save channels 1 and 2\nscope save 1 data.csv record=2.0    # record for 2 s then save\n</code></pre>"},{"location":"scope.html#built-in-tools","title":"Built-in Tools","text":"<p>These commands access built-in scope tools where available.</p>"},{"location":"scope.html#scope-awg","title":"scope awg","text":"<p>Control the built-in waveform generator (DHO914S and DHO924S only).</p> <pre><code>scope awg              # show available subcommands\nscope awg on           # enable AWG output\nscope awg off          # disable AWG output\nscope awg sine 1000 2.0 0    # configure: sine, 1 kHz, 2 Vpp, 0 V offset\n</code></pre>"},{"location":"scope.html#scope-counter","title":"scope counter","text":"<p>Control the built-in frequency counter.</p> <pre><code>scope counter on       # enable counter\nscope counter off      # disable counter\nscope counter read     # read current frequency\nscope counter source 1 # set counter source to channel 1\n</code></pre>"},{"location":"scope.html#scope-dvm","title":"scope dvm","text":"<p>Control the built-in digital voltmeter.</p> <pre><code>scope dvm on           # enable DVM\nscope dvm off          # disable DVM\nscope dvm read         # read current DVM value\nscope dvm source 1     # set DVM source to channel 1\n</code></pre>"},{"location":"scope.html#scope-state","title":"scope state","text":"<pre><code>scope state &lt;on|off|safe|reset&gt;\n</code></pre> Value Effect <code>on</code> Enable all channels <code>off</code> Disable all channels <code>safe</code> Channels off, trigger to default <code>reset</code> <code>*RST</code> \u2014 factory defaults"},{"location":"scope.html#dho804-specific-features","title":"DHO804-Specific Features","text":"<p>The following commands are available on the Rigol DHO804 and similar Rigol oscilloscopes.</p>"},{"location":"scope.html#scope-screenshot","title":"scope screenshot","text":"<p>Capture the scope display and save as PNG.</p> Rigol DHO804Tektronix MSO2024 <pre><code>scope screenshot                    # auto-named: screenshot_HHMMSS.png\nscope screenshot capture.png        # save as capture.png in data dir\nscope screenshot /path/to/file.png  # save to absolute path\n</code></pre> <p>Screenshots are saved to <code>~/Documents/scpi-instrument-toolkit/data/</code> by default.</p> <p>Not supported on this model.</p>"},{"location":"scope.html#scope-label-invert-bwlimit","title":"scope label / invert / bwlimit","text":"Rigol DHO804Tektronix MSO2024 <pre><code>scope label &lt;1-4&gt; &lt;text&gt;        # set channel label\nscope invert &lt;1-4&gt; &lt;on|off&gt;     # invert channel display\nscope bwlimit &lt;1-4&gt; &lt;20M|OFF&gt;   # set bandwidth limit\n</code></pre> Command Parameter Description <code>label</code> <code>&lt;ch&gt; &lt;text&gt;</code> Set a custom label for the channel <code>invert</code> <code>&lt;ch&gt; on\\|off</code> Flip the waveform vertically <code>bwlimit</code> <code>&lt;ch&gt; 20M\\|OFF</code> Enable 20 MHz bandwidth limit filter <pre><code>scope label 1 VCC\nscope invert 2 on\nscope bwlimit 1 20M\n</code></pre> <p>Not supported on this model.</p>"},{"location":"scope.html#scope-force","title":"scope force","text":"<p>Force a trigger event immediately.</p> <pre><code>scope force\n</code></pre> <p>Useful when the trigger is armed but not triggering. Works on all scope models.</p>"},{"location":"scope.html#scope-reset","title":"scope reset","text":"<p>Reset the scope to factory defaults.</p> <pre><code>scope reset\n</code></pre> <p>Sends <code>*RST</code> to restore factory defaults. Works on all scope models.</p>"},{"location":"scope.html#scope-display","title":"scope display","text":"Rigol DHO804Tektronix MSO2024 <p>Control display settings.</p> <pre><code>scope display clear                  # clear waveform display\nscope display brightness &lt;0-100&gt;     # set waveform brightness\nscope display grid &lt;FULL|HALF|NONE&gt;  # set grid style\nscope display gridbright &lt;0-100&gt;     # set grid brightness\nscope display persist &lt;MIN|1|5|10|INF|OFF&gt;  # set persistence time\nscope display type &lt;VECTORS|DOTS&gt;    # set display type\n</code></pre> Subcommand Parameter Description <code>clear</code> \u2014 Clear waveform display <code>brightness</code> <code>0</code>\u2013<code>100</code> Waveform brightness percentage <code>grid</code> <code>FULL</code>, <code>HALF</code>, <code>NONE</code> Grid style <code>gridbright</code> <code>0</code>\u2013<code>100</code> Grid brightness percentage <code>persist</code> <code>MIN</code>, <code>1</code>, <code>5</code>, <code>10</code>, <code>INF</code>, <code>OFF</code> Persistence time <code>type</code> <code>VECTORS</code>, <code>DOTS</code> Waveform rendering mode <p>Not supported on this model.</p>"},{"location":"scope.html#scope-acquire","title":"scope acquire","text":"Rigol DHO804Tektronix MSO2024 <p>Control acquisition settings.</p> <pre><code>scope acquire type &lt;NORMAL|AVERAGE|PEAK|HRES&gt;  # set acquisition type\nscope acquire averages &lt;count&gt;                  # set number of averages\nscope acquire depth &lt;AUTO|1K|10K|100K|1M|...&gt;   # set memory depth\nscope acquire rate                              # show current sample rate\n</code></pre> Subcommand Parameter Description <code>type</code> <code>NORMAL</code>, <code>AVERAGE</code>, <code>PEAK</code>, <code>HRES</code> Acquisition mode <code>averages</code> integer (2, 4, 8, \u2026 8192) Number of averages <code>depth</code> <code>AUTO</code>, <code>1K</code>, <code>10K</code>, <code>100K</code>, <code>1M</code>, <code>10M</code> Memory depth <code>rate</code> \u2014 Display current sample rate <p>Not supported on this model.</p>"},{"location":"scope.html#scope-cursor","title":"scope cursor","text":"Rigol DHO804Tektronix MSO2024 <p>Control measurement cursors.</p> <pre><code>scope cursor off                        # disable cursors\nscope cursor manual &lt;X|Y|XY&gt; [source]   # enable manual cursors\nscope cursor set &lt;ax&gt; [ay] [bx] [by]    # set cursor positions\nscope cursor read                       # read cursor values\n</code></pre> Subcommand Parameter Description <code>off</code> \u2014 Disable cursors <code>manual</code> <code>X</code>, <code>Y</code>, <code>XY</code> + optional source Enable manual cursors <code>set</code> up to 4 float values Set cursor positions <code>read</code> \u2014 Read and display cursor values <pre><code>scope cursor manual X CH1         # enable X cursors on channel 1\nscope cursor set 0.001 0.002      # set A and B cursor positions\nscope cursor read                 # read delta values\n</code></pre> <p>Not supported on this model.</p>"},{"location":"scope.html#scope-math","title":"scope math","text":"Rigol DHO804Tektronix MSO2024 <p>Control math channels (operations, FFT, filters).</p> <pre><code>scope math on|off [ch]                              # enable/disable math channel\nscope math op &lt;ch&gt; &lt;ADD|SUB|MUL|DIV&gt; &lt;src1&gt; [src2]  # arithmetic operation\nscope math func &lt;ch&gt; &lt;ABS|SQRT|LG|LN|EXP&gt; &lt;src&gt;    # math function\nscope math fft &lt;ch&gt; &lt;src&gt; [window=RECT]             # FFT analysis\nscope math filter &lt;ch&gt; &lt;LPAS|HPAS|BPAS|BSTOP&gt; &lt;src&gt; [upper=] [lower=]  # digital filter\nscope math scale &lt;ch&gt; &lt;scale&gt; [offset]              # set math channel scale\n</code></pre> Subcommand Description <code>on</code>/<code>off</code> Enable or disable a math channel <code>op</code> Arithmetic: ADD, SUB, MUL, DIV, AND, OR, XOR <code>func</code> Functions: ABS, SQRT, LG, LN, EXP, DIFF, INTG <code>fft</code> FFT analysis with configurable window <code>filter</code> Digital filter: low-pass, high-pass, band-pass, band-stop <code>scale</code> Adjust math channel vertical scale <pre><code>scope math on 1                        # enable math channel 1\nscope math op 1 SUB CH1 CH2            # Math1 = CH1 - CH2\nscope math fft 1 CH1 window=HANN       # FFT of CH1 with Hanning window\nscope math filter 1 LPAS CH1 upper=1000  # 1 kHz low-pass filter\n</code></pre> <p>Not supported on this model.</p>"},{"location":"scope.html#scope-record","title":"scope record","text":"Rigol DHO804Tektronix MSO2024 <p>Control waveform recording and playback.</p> <pre><code>scope record on|off           # enable/disable recording\nscope record frames &lt;count&gt;   # set number of frames to record\nscope record start            # start recording\nscope record stop             # stop recording\nscope record status           # show recording status\nscope record play             # start playback of recorded frames\n</code></pre> Subcommand Parameter Description <code>on</code>/<code>off</code> \u2014 Enable or disable recording mode <code>frames</code> integer Number of frames to record <code>start</code> \u2014 Begin recording <code>stop</code> \u2014 Stop recording <code>status</code> \u2014 Display current recording status <code>play</code> \u2014 Start playback of recorded frames <pre><code>scope record frames 500       # record 500 frames\nscope record start            # begin recording\nscope record status           # check status\nscope record play             # play back recording\n</code></pre> <p>Not supported on this model.</p>"},{"location":"scope.html#scope-mask","title":"scope mask","text":"Rigol DHO804Tektronix MSO2024 <p>Control pass/fail mask testing.</p> <pre><code>scope mask on|off                 # enable/disable mask testing\nscope mask source &lt;1-4&gt;           # set mask source channel\nscope mask tolerance &lt;x&gt; &lt;y&gt;      # set X and Y tolerance\nscope mask create                 # auto-create mask from current waveform\nscope mask start                  # start mask test\nscope mask stop                   # stop mask test\nscope mask stats                  # show pass/fail statistics\nscope mask reset                  # reset statistics\n</code></pre> Subcommand Parameter Description <code>on</code>/<code>off</code> \u2014 Enable or disable mask testing <code>source</code> <code>1</code>\u2013<code>4</code> Source channel for mask <code>tolerance</code> <code>&lt;x&gt; &lt;y&gt;</code> X and Y tolerance values <code>create</code> \u2014 Auto-create mask from current waveform <code>start</code>/<code>stop</code> \u2014 Start or stop mask test <code>stats</code> \u2014 Display pass/fail/total statistics <code>reset</code> \u2014 Reset statistics counters <pre><code>scope mask source 1               # set mask source to CH1\nscope mask create                  # create mask from current waveform\nscope mask start                  # start testing\nscope mask stats                  # view results\n</code></pre> <p>Not supported on this model.</p>"},{"location":"scripting.html","title":"Scripts &amp; Directives","text":"<p>Scripts are named sequences of REPL commands stored in the session. They support variables, loops, sub-scripts, and operator interaction \u2014 letting you automate full test sequences.</p> <p>Script directives (<code>set</code>, <code>array</code>, <code>print</code>, <code>pause</code>, <code>input</code>, <code>sleep</code>, <code>repeat</code>, <code>for</code>, <code>call</code>, <code>import</code>, <code>export</code>, <code>breakpoint</code>) are also valid as interactive REPL commands \u2014 you can test them at the prompt before putting them in a script.</p>"},{"location":"scripting.html#script-management","title":"Script Management","text":""},{"location":"scripting.html#script-new","title":"script new","text":"<p>Create a new script and open it in your editor.</p> <pre><code>script new &lt;name&gt;\n</code></pre> <p>Opens your system editor (<code>$EDITOR</code> / <code>$VISUAL</code>). Write one command per line. Save and close to finish.</p> <pre><code>script new my_psu_test\n</code></pre>"},{"location":"scripting.html#script-run","title":"script run","text":"<p>Execute a script with optional parameter overrides.</p> <pre><code>script run &lt;name|path&gt; [key=value ...]\n</code></pre> Parameter Required Description <code>name</code> required Script name (from <code>script list</code>) or a file path (absolute or relative to cwd). <code>key=value</code> optional Override script variables. Replaces the default values from <code>set</code> lines inside the script. <p>Pass a file path \u2014 with <code>/</code>, <code>\\</code>, a leading <code>.</code>, or a <code>.scpi</code> extension \u2014 to run a script directly from disk without copying it to the scripts library:</p> <pre><code>script run my_psu_test                     # named script in scripts dir\nscript run my_psu_test voltage=3.3         # with parameter override\nscript run ./lab3.scpi                     # run by relative path\nscript run ../tests/sweep.scpi             # run by relative path\nscript run /home/user/projects/lab3.scpi   # run by absolute path\nscript run C:/projects/lab3.scpi           # Windows absolute path\n</code></pre>"},{"location":"scripting.html#script-debug","title":"script debug","text":"<p>Run a script in the interactive debugger \u2014 step through commands one at a time, set breakpoints, and inspect state at any point.</p> <pre><code>script debug &lt;name|path&gt; [key=value ...]\n</code></pre> <p>Accepts the same name-or-path syntax as <code>script run</code>. See Debugger for the full reference.</p> <pre><code>script debug lab3\nscript debug ./lab3.scpi\nscript debug my_test voltage=3.3\n</code></pre>"},{"location":"scripting.html#script-dir","title":"script dir","text":"<p>Get or set the directory where named scripts are stored for this session.</p> <pre><code>script dir           # print current scripts directory\nscript dir &lt;path&gt;    # switch to a different directory\nscript dir reset     # go back to the default\n</code></pre> Example Effect <code>script dir .</code> Load named scripts from the current working directory <code>script dir ./scripts</code> Load from a <code>scripts/</code> subfolder of cwd <code>script dir /path/to/scripts</code> Load from an absolute path <code>script dir reset</code> Restore default (<code>~/Documents/scpi-instrument-toolkit/scripts/</code>) <p>Changing the scripts dir immediately reloads all named scripts from the new location. This is useful when your project keeps its <code>.scpi</code> files alongside its source code:</p> <pre><code>script dir .                # point at the project folder\nscript list                 # see what's available\nscript run lab3             # run lab3.scpi from the project folder\n</code></pre> <p>Note</p> <p><code>script dir</code> affects named scripts (used by <code>script run &lt;name&gt;</code>). To run a one-off file anywhere on disk without changing the scripts dir, use <code>script run ./path/to/file.scpi</code> instead.</p>"},{"location":"scripting.html#script-edit","title":"script edit","text":"<p>Open an existing script in your editor.</p> <pre><code>script edit &lt;name&gt;\n</code></pre>"},{"location":"scripting.html#script-show","title":"script show","text":"<p>Print a script's lines to the terminal with syntax highlighting.</p> <pre><code>script show &lt;name&gt;\n</code></pre>"},{"location":"scripting.html#script-list","title":"script list","text":"<p>Show all saved scripts with their line counts.</p> <pre><code>script list\n</code></pre>"},{"location":"scripting.html#script-rm","title":"script rm","text":"<p>Delete a script.</p> <pre><code>script rm &lt;name&gt;\n</code></pre>"},{"location":"scripting.html#script-import","title":"script import","text":"<p>Load script lines from a plain-text file.</p> <pre><code>script import &lt;name&gt; &lt;path&gt;\n</code></pre>"},{"location":"scripting.html#script-load-save","title":"script load / save","text":"<p>Reload scripts from disk, or show the current scripts directory.</p> <pre><code>script save [path]         # save (default: .repl_scripts.json)\nscript load [path]         # load (default: .repl_scripts.json)\n</code></pre> <p>Scripts persist between REPL sessions via <code>.repl_scripts.json</code>. Use <code>script save</code> before exiting and <code>script load</code> on next launch, or let the REPL do it automatically.</p>"},{"location":"scripting.html#variables","title":"Variables","text":"<p>Variables let you parameterize scripts so the same script works for different test conditions.</p>"},{"location":"scripting.html#set-define-a-variable","title":"set \u2014 define a variable","text":"<pre><code>set &lt;varname&gt; &lt;expression&gt;\n</code></pre> <p>Defines a variable accessible as <code>${varname}</code> in all subsequent lines. Evaluated at script expansion time (before execution begins), so arithmetic using other variables works.</p> Parameter Required Description <code>varname</code> required Variable name. No spaces \u2014 use underscores. <code>expression</code> required Value, string, or arithmetic expression. <pre><code>set voltage 5.0           # ${voltage} = 5.0\nset label vtest           # ${label} = \"vtest\"\nset doubled ${voltage} * 2    # ${doubled} = 10.0\nset offset ${voltage} - 0.5   # ${offset} = 4.5\n</code></pre>"},{"location":"scripting.html#error-handling-set-e-set-e","title":"Error handling: set -e / set +e","text":"<p>Control whether a script stops when a command fails (like bash's <code>set -e</code>).</p> <pre><code>set -e    # Enable exit-on-error: stop script on first command failure\nset +e    # Disable exit-on-error: continue despite errors\n</code></pre> <p>Example: stop on error</p> <pre><code>set -e\npsu1 set 5.0           # if this fails, script stops here\ndmm1 config vdc        # this won't run if PSU command failed\nprint Done             # this won't run either\n</code></pre> <p>Example: continue on error</p> <pre><code>set +e\npsu1 set 5.0           # if this fails, continue anyway\ndmm1 config vdc        # this runs regardless\nprint Done             # always executes\n</code></pre> <p>Tip</p> <p>Use <code>set -e</code> for critical test sequences where a single failure should abort the entire test. Use <code>set +e</code> when you want to collect partial results even if some commands fail.</p>"},{"location":"scripting.html#variable-substitution","title":"Variable substitution","text":"<p>Use <code>${varname}</code> anywhere in a script line and it will be replaced with the variable's value before the command runs:</p> <pre><code>set voltage 5.0\nset label my_run\n\npsu1 set ${voltage}               # \u2192 psu1 set 5.0\ndmm1 meas_store ${label} unit=V   # \u2192 dmm1 meas_store my_run unit=V\nprint Setting ${voltage}V         # \u2192 prints \"Setting 5.0V\"\n</code></pre>"},{"location":"scripting.html#overriding-variables-at-run-time","title":"Overriding variables at run time","text":"<p>Variables defined with <code>set</code> can be overridden when running the script from the command line:</p> <pre><code># Script has:  set voltage 5.0\nscript run my_test voltage=3.3    # runs with voltage=3.3 instead of 5.0\nscript run my_test voltage=12.0 label=high_v\n</code></pre> <p>This is how you reuse the same script for different test conditions without editing it.</p> <p>Priority order: command-line params &gt; <code>set</code> defaults in the script.</p>"},{"location":"scripting.html#measurements-in-scripts","title":"Measurements in scripts","text":"<p>Scripts use the same <code>meas_store</code>, <code>calc</code>, and <code>log</code> commands as the interactive REPL. Understanding how they fit together is key to writing useful test scripts.</p>"},{"location":"scripting.html#how-meas_store-works-in-a-script","title":"How meas_store works in a script","text":"<p><code>meas_store</code> saves a measurement to the measurement log with a name (the label) so you can retrieve it later. The label is just a string you choose \u2014 it becomes the row name in the log table.</p> <pre><code>psu1 meas_store v output_v unit=V   # measure voltage, save as \"output_v\"\ndmm1 config vdc                     # set DMM to DC voltage mode\ndmm1 meas_store dmm_v unit=V        # measure DMM, save as \"dmm_v\"\ncalc error m[\"output_v\"] - m[\"dmm_v\"] unit=V   # subtract them\nlog print                           # show the full table\n</code></pre> <p>After running this, <code>log print</code> shows:</p> <pre><code>Label       Value       Unit   Source\noutput_v    4.9987      V      psu.meas\ndmm_v       4.9992      V      dmm.read\nerror      -0.0005      V      calc\n</code></pre> <p>See Log &amp; Calc for the full reference.</p>"},{"location":"scripting.html#using-variables-as-log-labels","title":"Using variables as log labels","text":"<p>Script variables and log labels are two separate things:</p> <ul> <li>Script variable (<code>${var}</code>) \u2014 substituted into command text before the command runs</li> <li>Log label \u2014 the name given to a stored measurement row</li> </ul> <p>You can use a script variable as the log label \u2014 this is how you make labels dynamic:</p> <pre><code>set meas_name output_v         # script variable: meas_name = \"output_v\"\npsu1 meas_store v ${meas_name} unit=V\n#                  \u2514\u2500 expands to: psu1 meas_store v output_v unit=V\n#                     log label = \"output_v\"\n</code></pre> <p>This is especially useful in loops \u2014 each iteration gets a different label:</p> <pre><code>dmm1 config vdc\nfor v 3.3 5.0 12.0\n  psu1 set ${v}\n  sleep 0.5\n  dmm1 meas_store dmm_${v} unit=V   # labels: dmm_3.3, dmm_5.0, dmm_12.0\nend\nlog print    # all three rows appear in the log\n</code></pre>"},{"location":"scripting.html#a-complete-measurement-script","title":"A complete measurement script","text":"<pre><code># my_test \u2014 measure PSU accuracy at a target voltage\nset voltage 5.0\nset test_name vout_5v\n\nprint === Starting test: ${test_name} ===\npsu1 chan 1 on\npsu1 set ${voltage}\nsleep 0.5\n\npsu1 meas_store v psu_v unit=V         # save PSU reading as \"psu_v\"\ndmm1 config vdc                        # set DMM to DC voltage mode\ndmm1 meas_store dmm_v unit=V           # save DMM reading as \"dmm_v\"\n\ncalc error     m[\"dmm_v\"] - m[\"psu_v\"] unit=V\ncalc error_pct m[\"error\"] / m[\"psu_v\"] * 100 unit=%\n\nlog print\nlog save ${test_name}.csv\n\npsu1 chan 1 off\nprint === Done ===\n</code></pre> <p>Run it with different voltages without editing the script:</p> <pre><code>script run my_test voltage=3.3 test_name=vout_3v3\nscript run my_test voltage=12.0 test_name=vout_12v\n</code></pre>"},{"location":"scripting.html#output-and-operator-interaction","title":"Output and Operator Interaction","text":""},{"location":"scripting.html#print-display-a-message","title":"print \u2014 display a message","text":"<pre><code>print &lt;message&gt;\n</code></pre> <p>Prints a message to the terminal. Variable substitution works.</p> <pre><code>print === PSU/DMM Test ===\nprint Setting ${voltage}V to ${label}\nprint Test complete. Check log print for results.\n</code></pre> <p>Use <code>print</code> to add section headers, progress updates, and instructions in your scripts.</p>"},{"location":"scripting.html#pause-wait-for-operator","title":"pause \u2014 wait for operator","text":"<pre><code>pause [message]\n</code></pre> <p>Stops script execution and waits for the operator to press Enter. Use for manual steps \u2014 connecting probes, changing the DUT, verifying wiring \u2014 before the script continues.</p> Parameter Required Description <code>message</code> optional Prompt shown to operator. Default: \"Press Enter to continue...\" <pre><code>pause\npause Connect probe to TP1 then press Enter\npause Swap DUT before continuing\n</code></pre>"},{"location":"scripting.html#input-prompt-for-a-value","title":"input \u2014 prompt for a value","text":"<pre><code>input &lt;varname&gt; [prompt text]\n</code></pre> <p>Prompts the operator to type a value at runtime. The entered text is stored as <code>${varname}</code> and substituted into all subsequent lines.</p> Parameter Required Description <code>varname</code> required Variable name. The entered value will be available as <code>${varname}</code> in all lines after this directive. <code>prompt text</code> optional Text shown to operator. Default: the variable name. <pre><code>input voltage Enter target voltage (V):\ninput dut_id DUT serial number:\ninput operator_name Operator name:\n</code></pre> <p>After <code>input voltage</code>, you can use <code>${voltage}</code> anywhere:</p> <pre><code>input voltage Enter target voltage (V):\npsu1 set ${voltage}\nprint Voltage set to ${voltage}V\ndmm1 config vdc\ndmm1 meas_store output_${voltage} unit=V\n</code></pre> <p>Note</p> <p>Unlike <code>set</code>, values captured by <code>input</code> cannot be overridden from the command line at <code>script run</code> time. They are always prompted interactively.</p>"},{"location":"scripting.html#timing","title":"Timing","text":""},{"location":"scripting.html#sleep-pause-inside-a-script","title":"sleep \u2014 pause inside a script","text":"<pre><code>sleep &lt;seconds&gt;\n</code></pre> <p>Pauses execution for the given duration. Variable substitution works:</p> <pre><code>sleep 0.5              # pause 500 ms\nsleep ${delay}         # pause using a variable\nsleep 1.0              # wait 1 second for signal to settle\n</code></pre> <p>Use <code>sleep</code> after <code>psu set</code> or <code>awg wave</code> to let the output settle before measuring.</p>"},{"location":"scripting.html#loops","title":"Loops","text":""},{"location":"scripting.html#repeat-fixed-number-of-repetitions","title":"repeat \u2014 fixed number of repetitions","text":"<pre><code>repeat &lt;N&gt;\n  &lt;commands&gt;\nend\n</code></pre> <p>Executes the enclosed commands exactly N times.</p> Parameter Required Description <code>N</code> required Number of repetitions. Integer \u2265 1. <pre><code>repeat 5\n  psu1 meas_store v sample unit=V\n  sleep 0.2\nend\n</code></pre> <pre><code>repeat 3\n  dmm1 meas vdc\n  sleep 0.5\nend\n</code></pre>"},{"location":"scripting.html#for-loop-over-a-list-of-values","title":"for \u2014 loop over a list of values","text":"<pre><code>for &lt;var&gt; &lt;val1&gt; &lt;val2&gt; ... &lt;valN&gt;\n  &lt;commands&gt;\nend\n</code></pre> <p>Iterates over a whitespace-separated list of values. On each iteration, <code>${var}</code> is set to the next value in the list.</p> Parameter Required Description <code>var</code> required Loop variable name. Available as <code>${var}</code> inside the block. <code>val1 val2 ...</code> required Space-separated list of values to iterate over. <p>Sweep PSU through voltages:</p> <pre><code>dmm1 config vdc\nfor v 1.0 2.0 3.3 5.0 9.0 12.0\n  print Setting ${v}V...\n  psu1 set ${v}\n  sleep 0.5\n  dmm1 meas_store v_${v} unit=V\nend\n</code></pre> <p>Enable each scope channel in turn:</p> <pre><code>for ch 1 2 3 4\n  scope1 chan ${ch} on\nend\n</code></pre> <p>Frequency sweep:</p> <pre><code>for f 100 500 1000 5000 10000 50000\n  awg1 freq 1 ${f}\n  sleep 0.4\n  scope1 meas_store 1 FREQUENCY freq_${f} unit=Hz\n  scope1 meas_store 1 PK2PK pk2pk_${f} unit=V\nend\n</code></pre>"},{"location":"scripting.html#multi-variable-loops","title":"Multi-variable loops","text":"<p>Loop over multiple variables at once by separating them with commas. Values in the list are also comma-separated:</p> <pre><code>for VIN,VSCALE,LABEL 5.0,1.0,five 3.3,0.5,three 2.5,0.5,two\n  print Testing ${VIN}V with scale ${VSCALE} (${LABEL})\n  psu1 set ${VIN}\n  sleep 0.5\nend\n</code></pre>"},{"location":"scripting.html#interactive-forrepeat-loops","title":"Interactive for/repeat loops","text":"<p>You can enter <code>for</code> and <code>repeat</code> blocks directly in the interactive REPL. The prompt will change to show indentation, and you type <code>end</code> when finished:</p> <pre><code>eset&gt; for VIN 5.0 3.3 2.5\n  &gt; print Testing VIN=${VIN}\n  &gt; psu1 set ${VIN}\n  &gt; sleep 0.5\n  &gt; end\nTesting VIN=5.0\nTesting VIN=3.3\nTesting VIN=2.5\neset&gt;\n</code></pre> <p>This works exactly the same as in scripts \u2014 all variable substitution and nesting work the same way.</p> <p>Tip</p> <p>The loop variable is substituted in all lines inside the block \u2014 including labels, print messages, and sub-command parameters.</p> <p>Variable references in the value list:</p> <pre><code>set v_start 1.0\nset v_mid 5.0\nset v_end 12.0\n\nfor v ${v_start} ${v_mid} ${v_end}\n  psu1 set ${v}\n  sleep 0.5\nend\n</code></pre>"},{"location":"scripting.html#array-multi-line-value-list","title":"array \u2014 multi-line value list","text":"<pre><code>array &lt;varname&gt;\n  &lt;value1&gt;\n  &lt;value2&gt;\n  ...\nend\n</code></pre> <p>Builds a variable from a list of values, one per line. Comment out any line with <code>#</code> to exclude it from the list. The result is stored as a space-separated string compatible with <code>for</code>.</p> <p>This is the preferred way to define a sweep table \u2014 it's easy to read and you can disable individual points by commenting them out.</p> Parameter Required Description <code>varname</code> required Variable name. each line \u2014 One element per line. Lines starting with <code>#</code> are skipped. <pre><code>array SWEEP\n  5.0,0.001,1.0\n  3.3,0.001,0.5\n  # 2.5,0.001,0.5   &lt;- commented out, skipped\n  1.8,0.0005,0.5\n  1.5,0.0005,0.2\nend\n\nfor VIN,HSCALE,VSCALE ${SWEEP}\n  psu set ${VIN} 0.5\n  scope hscale ${HSCALE}\n  scope vscale 1 ${VSCALE} 0\nend\n</code></pre> <p>This is equivalent to writing all values inline on the <code>for</code> line \u2014 but much easier to manage.</p>"},{"location":"scripting.html#variable-scope","title":"Variable Scope","text":"<p>By default, each script runs in its own isolated variable scope. Variables defined inside a script do not leak into the REPL, and REPL variables are not automatically visible inside scripts. Use <code>import</code> and <code>export</code> to explicitly cross the boundary.</p>"},{"location":"scripting.html#import-pull-a-variable-from-the-parent-scope","title":"import \u2014 pull a variable from the parent scope","text":"<pre><code>import &lt;varname&gt; [varname2 ...]\n</code></pre> <p>Copies a variable from the calling scope (REPL or parent script) into the current script's scope. If the variable does not exist in the parent scope, an error is raised.</p> <pre><code>import FREQ VREF    # bring FREQ and VREF in from the REPL\npsu set ${VREF} 0.5\nawg freq 1 ${FREQ}\n</code></pre>"},{"location":"scripting.html#export-push-a-variable-back-to-the-parent-scope","title":"export \u2014 push a variable back to the parent scope","text":"<pre><code>export &lt;varname&gt; [varname2 ...]\n</code></pre> <p>When the script finishes, copies the named variable back to the calling scope (REPL or parent script). Only explicitly exported variables survive \u2014 everything else stays local.</p> <pre><code>set result 42.0\nexport result    # ${result} becomes available in the REPL after the script runs\n</code></pre> <p>Example: script that returns a computed value</p> <pre><code># measure_vout \u2014 measures PSU output, exports result\nset VOUT 0.0\npsu meas_store v psu_reading unit=V\nset VOUT m[\"psu_reading\"]\nexport VOUT\n</code></pre> <p>After <code>script run measure_vout</code>, <code>${VOUT}</code> is available in the REPL.</p>"},{"location":"scripting.html#sub-scripts","title":"Sub-scripts","text":""},{"location":"scripting.html#call-run-another-script-inline","title":"call \u2014 run another script inline","text":"<pre><code>call &lt;name&gt; [key=value ...]\n</code></pre> <p>Executes another script as a sub-routine. The called script runs in its own variable scope. Variables from the current script can be passed as parameters.</p> Parameter Required Description <code>name</code> required Name of the script to call. <code>key=value</code> optional Parameters to pass. Supports variable substitution in values. <pre><code>call set_psu voltage=5.0\ncall set_psu voltage=${target_v}     # pass a variable from current script\n</code></pre> <p>Example: reusable sub-script pattern</p> <p>Create a script <code>set_psu</code>:</p> <pre><code># set_psu \u2014 sets PSU to a voltage and verifies\n# Params: voltage, label\nset voltage 5.0\nset label psu_out\n\npsu1 chan 1 on\npsu1 set ${voltage}\nsleep 0.5\npsu1 meas_store v ${label} unit=V\n</code></pre> <p>Call it from another script:</p> <pre><code># main test\ndmm1 config vdc\nfor v 3.3 5.0 12.0\n  call set_psu voltage=${v} label=psu_${v}\n  dmm1 meas_store dmm_${v} unit=V\nend\nlog print\n</code></pre> <p>Note</p> <p>Parameters passed via <code>call</code> override <code>set</code> defaults in the called script \u2014 same priority rules as <code>script run</code>.</p>"},{"location":"scripting.html#comments","title":"Comments","text":"<p>Lines beginning with <code>#</code> are ignored during execution.</p> <pre><code># This is a comment\nset voltage 5.0     # inline comments work too\n</code></pre> <p>Use comments liberally to document what each section does, expected values, and any hardware setup required.</p>"},{"location":"scripting.html#debugger","title":"Debugger","text":"<p>The script debugger lets you step through a script one command at a time, set breakpoints, jump around, and run live REPL commands while paused. Because all loops and variables are fully expanded before the debugger starts, every iteration of a <code>for</code> loop appears as a separate numbered line \u2014 you can set a breakpoint on exactly the one point you care about.</p>"},{"location":"scripting.html#starting-the-debugger","title":"Starting the debugger","text":"<pre><code>script debug &lt;name&gt; [key=value ...]\n</code></pre> <pre><code>script debug lab3\nscript debug my_sweep voltage=3.3\n</code></pre>"},{"location":"scripting.html#in-script-breakpoints","title":"In-script breakpoints","text":"<p>Add <code>breakpoint</code> anywhere in a script file to automatically pause there, even when running with <code>script run</code>:</p> <pre><code>psu set ${VIN} 0.5\npsu chan on\nbreakpoint          \u2190 execution pauses here; drops into debugger\nscope single\n</code></pre>"},{"location":"scripting.html#debugger-display","title":"Debugger display","text":"<p>When paused, the debugger shows a context window around the current line. The current line is highlighted in cyan. Lines with breakpoints are marked with <code>\u25cf</code>:</p> <pre><code>  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n      12     psu chan off\n      13     sleep 0.5\n  \u2192   14     psu set 5.0 0.5\n  \u25cf   15     psu chan on\n      16     sleep 0.3\n  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  14/42  \u2502  n=step  c=continue  back  goto N  b N=break  d N=del  l=list  q=quit\n\n(dbg) _\n</code></pre>"},{"location":"scripting.html#debugger-commands","title":"Debugger commands","text":"Command Action Enter / <code>n</code> Execute the current line and advance to the next <code>c</code> Continue running until the next breakpoint or end of script <code>back</code> Move pointer back one line without executing \u2014 lets you re-run a command <code>goto N</code> Jump the pointer to line N \u2014 lines in between are not executed or reversed <code>b N</code> Set a breakpoint at line N <code>d N</code> Delete the breakpoint at line N <code>l</code> Show a wider context window (\u00b18 lines) <code>info</code> Show current line number and all active breakpoints <code>q</code> Abort the script and return to the REPL any command Type any REPL command (e.g. <code>psu meas v</code>, <code>scope meas 1 FREQ</code>) to run it live <p>Note</p> <p><code>back</code> moves the execution pointer but does not reverse any instrument state. Use it when you want to re-execute a command, not to undo it.</p> <p>Tip</p> <p>Because the full script is expanded before the debugger starts, line numbers are stable for the entire session. A <code>for</code> loop with 7 iterations appears as 7\u00d7N separate lines \u2014 you can set a breakpoint at exactly the iteration you want to inspect.</p>"},{"location":"scripting.html#complete-example","title":"Complete Example","text":"<p>A script combining all features:</p> <pre><code># full_test.repl\n# Full voltage characterization test\n# Params: dut_name, v_min, v_max, steps\n\n# \u2500\u2500 Defaults \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nset dut_name my_dut\nset v_min 1.0\nset v_max 5.0\nset steps 5\nset delay 0.5\n\n# \u2500\u2500 Operator setup \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nprint === Voltage Characterization Test ===\nprint DUT: ${dut_name}\npause Connect DUT and DMM probes, then press Enter\n\n# \u2500\u2500 Optional runtime input \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\ninput operator Operator initials:\n\n# \u2500\u2500 PSU on \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\npsu1 chan 1 on\nprint PSU enabled\ndmm1 config vdc\n\n# \u2500\u2500 Sweep \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nfor v 1.0 2.0 3.3 5.0 9.0 12.0\n  print Testing ${v}V...\n  psu1 set ${v}\n  sleep ${delay}\n  psu1 meas_store v psu_${v} unit=V\n  dmm1 meas_store dmm_${v} unit=V\n  calc err_${v} (m[\"dmm_${v}\"] - m[\"psu_${v}\"]) / m[\"psu_${v}\"] * 100 unit=%\nend\n\n# \u2500\u2500 Results \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nprint === Test complete ===\nlog print\nlog save ${dut_name}_results.csv\n\n# \u2500\u2500 Safe state \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\npsu1 chan 1 off\nprint PSU off \u2014 done\n</code></pre> <p>Run it:</p> <pre><code>script run full_test dut_name=widget_rev2 delay=1.0\n</code></pre>"}]}